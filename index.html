<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excluziv - AI Legal Tools</title>
    <base target="_self">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Configure Tailwind CSS for class-based dark mode
      tailwind.config = {
        darkMode: 'class',
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase Module -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut, signInAnonymously, signInWithCustomToken, signInWithPhoneNumber, RecaptchaVerifier } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "AIzaSyANizkpJLRvhYWlIPH6qDQjutxxV12M7PA", // Firebase API Key
            authDomain: "excluziv-3d87f.firebaseapp.com",
            projectId: "excluziv-3d87f",
            storageBucket: "excluziv-3d87f.appspot.com",
            messagingSenderId: "497134345362",
            appId: "1:497134345362:web:0b3cb77396de81b72d9a4b",
            measurementId: "G-0M7Z87NRZD"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
        setLogLevel('debug'); 

        const provider = new GoogleAuthProvider();

        window.signInWithGoogle = () => {
            signInWithPopup(window.auth, provider)
                .then(() => {
                    closeAuthModal();
                    showPage('ai-assistant-page');
                })
                .catch((error) => {
                    console.error("Google Sign-In Error:", error);
                    showCustomAlert(getCurrentTranslation('authFailedError'));
                });
        };

        window.signInAsGuest = () => {
            signInAnonymously(window.auth)
                .then(() => {
                    closeAuthModal();
                    showPage('ai-assistant-page');
                })
                .catch((error) => {
                    console.error("Anonymous Sign-In Error:", error);
                    showCustomAlert(getCurrentTranslation('guestLoginFailedError'));
                });
        };

        window.signOutUser = () => {
            document.getElementById('logout-confirm-modal').classList.remove('hidden');
        };
        
        window.confirmLogout = () => {
            signOut(window.auth).catch((error) => console.error("Sign Out Error:", error));
            document.getElementById('logout-confirm-modal').classList.add('hidden');
        };

        window.cancelLogout = () => {
            document.getElementById('logout-confirm-modal').classList.add('hidden');
        };

        onAuthStateChanged(window.auth, user => {
            const authRequiredElements = document.querySelectorAll('.auth-required');
            const guestOnlyElements = document.querySelectorAll('.guest-only');

            if (user) { 
                authRequiredElements.forEach(el => el.classList.remove('hidden'));
                guestOnlyElements.forEach(el => el.classList.add('hidden'));
            } else { 
                authRequiredElements.forEach(el => el.classList.add('hidden'));
                guestOnlyElements.forEach(el => el.classList.remove('hidden'));
                
                const currentPage = document.querySelector('.page:not(.hidden)');
                if (currentPage && (currentPage.id === 'ai-assistant-page' || currentPage.id === 'tools-page') ) {
                   showPage('home-page');
                }
            }
        });

        // --- Phone Auth Logic ---
        let confirmationResult = null;
        let recaptchaVerifier = null;

        window.showPhoneAuthModal = function() {
            document.getElementById('auth-modal').classList.add('hidden');
            document.getElementById('phone-auth-modal').classList.remove('hidden');
            document.getElementById('phone-auth-step-phone').classList.remove('hidden');
            document.getElementById('phone-auth-step-otp').classList.add('hidden');
            document.getElementById('phone-auth-message').innerText = '';
            if (!recaptchaVerifier) {
                recaptchaVerifier = new RecaptchaVerifier('recaptcha-container', {
                    'size': 'normal',
                    'callback': function(response) {},
                    'expired-callback': function() {}
                }, window.auth);
                recaptchaVerifier.render();
            }
        }
        window.closePhoneAuthModal = function() {
            document.getElementById('phone-auth-modal').classList.add('hidden');
        }
        window.sendOtp = function() {
            const countryCode = document.getElementById('country-code-select').value;
            const phoneNumberRaw = document.getElementById('phone-number-input').value.trim();
            const messageDiv = document.getElementById('phone-auth-message');
            if (!/^\d{7,15}$/.test(phoneNumberRaw)) {
                messageDiv.innerText = 'Please enter a valid phone number.';
                return;
            }
            const phoneNumber = countryCode + phoneNumberRaw;
            messageDiv.innerText = 'Sending OTP...';
            signInWithPhoneNumber(window.auth, phoneNumber, recaptchaVerifier)
                .then((result) => {
                    confirmationResult = result;
                    document.getElementById('phone-auth-step-phone').classList.add('hidden');
                    document.getElementById('phone-auth-step-otp').classList.remove('hidden');
                    messageDiv.innerText = 'OTP sent! Please check your phone.';
                })
                .catch((error) => {
                    messageDiv.innerText = 'Error sending OTP: ' + error.message;
                });
        }
        window.verifyOtp = function() {
            const code = document.getElementById('otp-input').value;
            const messageDiv = document.getElementById('phone-auth-message');
            if (!confirmationResult) {
                messageDiv.innerText = 'Please request OTP first.';
                return;
            }
            messageDiv.innerText = 'Verifying OTP...';
            confirmationResult.confirm(code)
                .then((result) => {
                    closePhoneAuthModal();
                    closeAuthModal();
                    showPage('ai-assistant-page');
                })
                .catch((error) => {
                    messageDiv.innerText = 'Invalid OTP. Please try again.';
                });
        }
        window.resendOtp = function() {
            recaptchaVerifier.clear();
            recaptchaVerifier = null;
            document.getElementById('phone-auth-step-phone').classList.remove('hidden');
            document.getElementById('phone-auth-step-otp').classList.add('hidden');
            document.getElementById('phone-auth-message').innerText = '';
        }

    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
            padding-bottom: 5rem !important; /* Mobile UI Fix */
        }
        .gradient-text {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .service-card {
             transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .service-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .animated-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animated-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .prose {
            max-width: 65ch;
            color: inherit;
        }
        
        /* Enhanced Chat Interface */
        .chat-message {
            margin-bottom: 1rem;
            animation: fadeInUp 0.3s ease-out;
        }
        
        .user-message {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }
        
        .ai-message {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 1rem;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            position: relative;
            word-wrap: break-word;
        }
        
        .user-bubble {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border-bottom-right-radius: 0.25rem;
        }
        
        .ai-bubble {
            background: white;
            color: #1f2937;
            border: 1px solid #e5e7eb;
            border-bottom-left-radius: 0.25rem;
        }
        
        .dark .ai-bubble {
            background: #374151;
            color: #f9fafb;
            border-color: #4b5563;
        }
        
        /* Loading States & Animations */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        .dark .skeleton {
            background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Better Mobile Experience */
        @media (max-width: 768px) {
            .mobile-optimized {
                padding: 1rem;
            }
            
            .touch-target {
                min-height: 44px;
                min-width: 44px;
            }
            
            .mobile-text {
                font-size: 1rem;
                line-height: 1.5;
            }
        }
        
        /* Enhanced File Upload Area */
        .file-drop-zone {
            border: 2px dashed #d1d5db;
            border-radius: 0.5rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            background: #f9fafb;
        }
        
        .file-drop-zone:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .file-drop-zone.dragover {
            border-color: #3b82f6;
            background: #dbeafe;
            transform: scale(1.02);
        }
        
        .dark .file-drop-zone {
            border-color: #4b5563;
            background: #1f2937;
        }
        
        .dark .file-drop-zone:hover {
            border-color: #60a5fa;
            background: #1e3a8a;
        }
        
        /* Progress Indicators */
        .progress-bar {
            background: #e5e7eb;
            border-radius: 9999px;
            height: 0.5rem;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            height: 100%;
            border-radius: 9999px;
            transition: width 0.3s ease;
        }
        
        /* Micro-interactions */
        .micro-interaction {
            transition: all 0.15s ease;
        }
        
        .micro-interaction:hover {
            transform: translateY(-2px);
        }
        
        .micro-interaction:active {
            transform: translateY(0) scale(0.98);
        }
        
        /* Enhanced Tooltips */
        .tooltip-container {
            position: relative;
        }
        
        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 50;
        }
        
        .tooltip-container:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }
        
        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: #1f2937;
        }
        
        /* Improved Responsive Design */
        .responsive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        @media (max-width: 640px) {
            .responsive-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
        
        /* Error Handling */
        .error-state {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .dark .error-state {
            background: #7f1d1d;
            border-color: #dc2626;
        }
        
        .success-state {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .dark .success-state {
            background: #14532d;
            border-color: #16a34a;
        }
        
        /* Search and Filter */
        .search-container {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background: white;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .dark .search-input {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }
        
                .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }
        
        .prose img {
            max-width: 100% !important;
        }
        }
        .prose pre {
            background-color: #f3f4f6;
            color: #111827;
            padding: 1rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .dark .prose pre {
            background-color: #1f2937;
            color: #d1d5db;
        }
        #ai-output h3, .blog-content h2, .blog-content h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .blog-content h3 {
             font-size: 1.25rem;
             font-weight: 600;
        }
        #ai-output ul, .blog-content ul {
            list-style-position: inside;
            list-style-type: disc;
            padding-left: 1rem;
            margin-bottom: 1rem;
        }
        .output-heading {
            font-size: 0.875rem;
            font-weight: 600;
            color: #4b5563;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 1rem;
            margin-bottom: 0.25rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        .dark .output-heading {
             color: #9ca3af;
             border-bottom-color: #374151;
        }
        .chat-container {
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            height: 70vh;
            max-height: 700px;
            width: 90vw;
            max-width: 400px;
            border-radius: 0.75rem;
        }
        .chat-hidden {
            transform: translateY(110%);
            visibility: hidden;
            opacity: 0;
        }
        .chat-visible {
            transform: translateY(0);
            visibility: visible;
            opacity: 1;
        }
        #disclaimer-modal, #auth-modal, #optimizer-modal {
            transition: opacity 0.3s ease;
        }
        .dropdown:hover .dropdown-menu { display: block; }
        .dropdown-menu { display: none; }
        .lang-btn.active { background-color: #3B82F6; color: white; }
         * { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease; }
        
        /* --- Mobile menu overlay & panel --- */
        #mobile-menu-overlay { display: none; }
        #mobile-menu-overlay.active {
            display: block; position: fixed; inset: 0;
            background: rgba(0,0,0,0.5); z-index: 999;
        }
        #mobile-menu-panel {
            position: fixed; top: 0; left: 0;
            height: 100%; width: 16rem;
            background: #fff; 
            padding: 1.5rem; transform: translateX(-100%);
            transition: transform 0.3s ease; z-index: 1000;
        }
        .dark #mobile-menu-panel {
             background: #1f2937; /* dark:bg-gray-800 */
        }
        #mobile-menu-panel.active {
            transform: translateX(0);
        }
        /* --- Hero stacking on very small screens --- */
        @media (max-width: 639px) {
            .hero-container { flex-direction: column-reverse !important; }
        }
        /* --- Touch â€‘ friendly buttons & form tweaks --- */
        button, .bg-blue-600 {
            padding-top: 1rem !important; 
            padding-bottom: 1rem !important;
        }
        #query-form {
            max-width: 100% !important;
        }
        /* --- Hide bottom nav when chat opens --- */
        #bottom-nav.hidden {
            opacity: 0; pointer-events: none;
            transition: opacity 0.3s;
        }
        /* --- Skeleton loader placeholder class --- */
        .skeleton {
            background: #e2e8f0; /* light gray */
            border-radius: 0.25rem;
        }
        
        /* --- Reasoning Toggle Switch Styles --- */
        #reasoning-toggle:checked + label .w-14 {
            background-color: #fbbf24; /* yellow-400 */
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
        }
        
        #reasoning-toggle:checked + label .transform {
            transform: translateX(1.75rem);
        }
        
        #reasoning-toggle:checked + label #bulb-icon {
            color: #f59e0b; /* yellow-600 */
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.8);
            filter: drop-shadow(0 0 5px rgba(245, 158, 11, 0.6));
        }
        
        #reasoning-toggle:checked + label #reasoning-label {
            color: #f59e0b; /* yellow-600 */
            font-weight: 700;
        }
        
        /* Dark mode adjustments for toggle */
        .dark #reasoning-toggle:checked + label .w-14 {
            background-color: #fbbf24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }
        
        .dark #reasoning-toggle:checked + label #bulb-icon {
            color: #f59e0b;
            text-shadow: 0 0 15px rgba(245, 158, 11, 1);
        }
        
        /* Hover effects */
        #reasoning-toggle + label:hover .w-14 {
            box-shadow: 0 0 10px rgba(156, 163, 175, 0.3);
        }
        
        #reasoning-toggle:checked + label:hover .w-14 {
            box-shadow: 0 0 25px rgba(251, 191, 36, 0.6);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.16/mammoth.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 antialiased">

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" aria-hidden="true"></div>

    <!-- Mobile Menu Panel (Sliding) -->
    <div id="mobile-menu-panel" role="dialog" aria-modal="true" aria-labelledby="mobile-menu-label">
      <button id="mobile-menu-close" class="mb-4 text-gray-700 dark:text-gray-200" aria-label="Close menu">
        <i class="fas fa-times fa-lg"></i>
      </button>
      <nav aria-label="Mobile main navigation">
        <!-- Mobile Dark Mode & Language Controls -->
        <div class="mb-6 border-b border-gray-200 dark:border-gray-600 pb-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-gray-700 dark:text-gray-200" data-lang-key="darkMode">Dark Mode</span>
            <button id="mobile-theme-toggle" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-blue-600 transition-colors">
              <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform dark:translate-x-6 translate-x-1"></span>
            </button>
          </div>
          <div class="flex flex-wrap gap-2">
            <button class="lang-btn px-3 py-1 text-sm rounded-full border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700" data-lang="en">EN</button>
            <button class="lang-btn px-3 py-1 text-sm rounded-full border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700" data-lang="hi">à¤¹à¤¿à¤‚à¤¦à¥€</button>
          </div>
        </div>
        
        <a href="#" onclick="showPage('home-page', event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="home">Home</a>
        <a href="#" onclick="showPage('about-page', event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="about">About</a>
        <a href="#" onclick="showPage('blog-page', event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="blog">Blog</a>
        <a href="#" onclick="showPage('team-page', event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="team">Team</a>
        <a href="#" onclick="showAiAssistantPage(event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="tools">Tools</a>
        <a href="#" onclick="showPage('contact-page', event); closeMenu();" class="block py-2 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400" data-lang-key="contact">Contact</a>
      </nav>
    </div>

    <!-- Navigation Bar -->
    <nav class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm shadow-sm fixed w-full z-20 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex items-center" onclick="showPage('home-page', event)">
                        <img src="https://i.ibb.co/tptYSRk3/Excuxziv-no-back.png" alt="Excluziv Logo" class="h-9 w-auto" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/100x36/ffffff/000000?text=Excluziv';">
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium" onclick="showPage('home-page', event)" data-lang-key="home">Home</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium" onclick="showPage('about-page', event)" data-lang-key="about">About</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium" onclick="showPage('blog-page', event)" data-lang-key="blog">Blog</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium" onclick="showPage('team-page', event)" data-lang-key="team">Team</a>
                    <a href="#" class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 font-medium" onclick="showAiAssistantPage(event)" data-lang-key="tools">Tools</a>
                    
                    <div class="flex items-center space-x-4">
                        <!-- Dark Mode Toggle -->
                        <button id="dark-mode-toggle" class="relative inline-flex items-center h-8 w-14 rounded-full p-1 bg-gray-300 dark:bg-gray-600 focus:outline-none">
                            <span id="dark-mode-thumb" class="w-6 h-6 rounded-full bg-white flex items-center justify-center text-gray-500 shadow-md transform transition-transform duration-300 ease-in-out dark:translate-x-6">
                                <i class="fas fa-sun"></i>
                                <i class="fas fa-moon hidden"></i>
                            </span>
                        </button>
                        <!-- Auth Buttons -->
                        <div class="guest-only">
                            <button onclick="showAiAssistantPage(event)" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium shadow-md" data-lang-key="tryAiAssistant">Try AI Assistant</button>
                        </div>
                        <div class="auth-required hidden">
                           <button onclick="signOutUser()" class="bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-lg font-medium shadow-md" data-lang-key="logout">Logout</button>
                        </div>
                    </div>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-gray-500 hover:text-gray-600 focus:outline-none" aria-label="Open menu" aria-expanded="false">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="pt-16 min-h-screen">
        <!-- Home Page -->
        <div id="home-page" class="page">
             <!-- Hero Section -->
            <section class="py-20 md:py-28 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-7xl mx-auto">
                    <div class="flex flex-col md:flex-row items-center hero-container">
                        <div class="md:w-1/2 mb-10 md:mb-0 text-center md:text-left">
                            <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 dark:text-white mb-6 leading-tight">
                                <span data-lang-key="heroTitle">Revolutionizing Legal Services with</span> <span class="gradient-text" data-lang-key="heroSubtitle">AI Technology</span>
                            </h1>
                            <p class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-xl mx-auto md:mx-0" data-lang-key="heroDescription">
                                Excluziv provides cutting-edge legal-tech solutions to streamline your legal processes and enhance efficiency with artificial intelligence.
                            </p>
                            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center md:justify-start">
                                <button onclick="showAiAssistantPage(event)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1" data-lang-key="tryAiAssistantFree">
                                    Try AI Assistant for FREE
                                </button>
                                <a href="#" onclick="showPage('about-page', event)" class="bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 px-8 py-3 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-1" data-lang-key="learnMore">
                                    Learn More
                                </a>
                            </div>
                        </div>
                        <div class="md:w-1/2">
                            <img src="https://images.unsplash.com/photo-1589829545856-d10d557cf95f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Legal Tech" class="rounded-lg shadow-2xl w-full h-auto" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Legal+Tech';">
                        </div>
                    </div>
                </div>
            </section>
            <!-- Services Section -->
            <section class="py-20 bg-gray-100 dark:bg-gray-800/50 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="servicesTitle">Our Services</h2>
                        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-lang-key="servicesDescription">
                            We offer comprehensive legal-tech solutions tailored to your specific needs.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-robot text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service1Title">AI Legal Assistant</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service1Description">
                                Our AI-powered assistant provides instant answers to legal questions, helping you navigate complex legal matters with ease.
                            </p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-file-contract text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service2Title">Document Automation</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service2Description">
                                Generate legal documents in minutes with our smart templates that adapt to your specific requirements.
                            </p>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-file-shield text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service3Title">Contract Review & Analysis</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service3Description">
                                Leverage AI to analyze contracts, identify risks, and ensure compliance with legal standards.
                            </p>
                        </div>
                         <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-file-magnifying-glass text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service4Title">Discovery Document Analyzer</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service4Description">
                                Efficiently sift through large volumes of discovery documents to find key evidence and insights.
                            </p>
                        </div>
                         <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-clipboard-check text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service5Title">Compliance Checker</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service5Description">
                                Automatically audit documents and business processes against regulatory checklists to ensure compliance.
                            </p>
                        </div>
                         <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center service-card">
                            <div class="text-blue-600 dark:text-blue-400 mb-5 inline-block bg-blue-100 dark:bg-blue-900/50 p-4 rounded-full">
                                <i class="fas fa-user-secret text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="service6Title">GDPR Privacy Services</h3>
                            <p class="text-gray-600 dark:text-gray-300" data-lang-key="service6Description">
                                Assess and manage your data privacy obligations under GDPR and other data protection regulations.
                            </p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Testimonials -->
            <section class="py-20 bg-gray-50 dark:bg-gray-800/50 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="testimonialsTitle">What Our Clients Say</h2>
                        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-lang-key="testimonialsDescription">
                            Trusted by legal professionals and businesses worldwide.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6">
                            <div class="flex items-center mb-4">
                                <div class="text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="testimonial1">
                                "Excluziv's AI assistant has transformed how we handle client inquiries. It's like having an extra associate available 24/7."
                            </p>
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-gray-300 mr-3 overflow-hidden">
                                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Johnson" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://placehold.co/40x40/E2E8F0/4A5568?text=SJ'">
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white">Sarah Johnson</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Partner, Johnson & Associates</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6">
                            <div class="flex items-center mb-4">
                                <div class="text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="testimonial2">
                                "The document automation tool has saved us hundreds of hours. The accuracy and customization options are impressive."
                            </p>
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-gray-300 mr-3 overflow-hidden">
                                     <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael Chen" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://placehold.co/40x40/E2E8F0/4A5568?text=MC'">
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white">Michael Chen</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">General Counsel, TechCorp</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-6">
                            <div class="flex items-center mb-4">
                                <div class="text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="testimonial3">
                                "As a solo practitioner, Excluziv's tools have leveled the playing field for me. I can compete with much larger firms now."
                            </p>
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-gray-300 mr-3 overflow-hidden">
                                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Emily Rodriguez" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://placehold.co/40x40/E2E8F0/4A5568?text=ER'">
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900 dark:text-white">Emily Rodriguez</h4>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">Attorney at Law</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How to Use the AI Legal Assistant -->
            <section class="py-20 bg-white dark:bg-gray-900 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-5xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6" data-lang-key="howToUseTitle">How to Use the AI Legal Assistant</h2>
                    <div class="text-left max-w-3xl mx-auto space-y-6">
                        <div class="flex items-start space-x-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                            <p class="text-gray-700 dark:text-gray-300" data-lang-key="howToUseStep1">Select the tool you want to use from the menu â€” or simply type your query into the input box.</p>
                        </div>
                        <div class="flex items-start space-x-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                            <p class="text-gray-700 dark:text-gray-300" data-lang-key="howToUseStep2">For more complex queries, choose the appropriate mode such as Reasoning Mode for deeper legal insight.</p>
                        </div>
                        <div class="flex items-start space-x-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                            <p class="text-gray-700 dark:text-gray-300" data-lang-key="howToUseStep3">(Optional) Use the Prompt Optimizer to refine and improve your query for better results.</p>
                        </div>
                        <div class="flex items-start space-x-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg">4</div>
                            <p class="text-gray-700 dark:text-gray-300" data-lang-key="howToUseStep4">Upload any relevant documents to provide context to your query (if available).</p>
                        </div>
                         <div class="flex items-start space-x-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-800">
                            <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg">5</div>
                            <p class="text-gray-700 dark:text-gray-300" data-lang-key="howToUseStep5">Click Submit and let the AI Legal Assistant work its magic.</p>
                        </div>
                    </div>
                    <div class="mt-10">
                        <a href="#" onclick="showAiAssistantPage(event)" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1" data-lang-key="exploreToolsBtn">
                           ðŸ‘‰ TRY AI FREE LEGAL ASSISTANT
                        </a>
                    </div>
                </div>
            </section>

             <!-- Submit Query Section -->
            <section class="py-20 bg-gray-100 dark:bg-gray-800/50 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="submitQueryTitle">Submit Your Query</h2>
                    <p class="text-lg text-gray-600 dark:text-gray-300 mb-8" data-lang-key="submitQueryDescription">
                        Have a question? Fill out the form below and we'll get back to you.
                    </p>
                    <form id="query-form" class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg text-left space-y-6" novalidate>
                        <div>
                            <label for="query-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" data-lang-key="nameLabel">Your Name</label>
                            <input type="text" name="data[Name]" id="query-name" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white" required>
                        </div>
                        <div>
                            <label for="query-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" data-lang-key="emailLabel">Your Email</label>
                            <input type="email" name="data[Email]" id="query-email" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white" required>
                        </div>
                        <div>
                            <label for="query-message" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" data-lang-key="messageLabel">Your Message</label>
                            <textarea name="data[Message]" id="query-message" rows="5" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white" required></textarea>
                        </div>
                        <div>
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1" data-lang-key="submitInquiry">
                                Submit Your Inquiry
                            </button>
                        </div>
                        <div id="query-form-message" class="text-center mt-4"></div>
                    </form>
                </div>
            </section>
        </div>

        <!-- Tools Page -->
        <div id="tools-page" class="page hidden">
            <section class="py-20 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-extrabold text-gray-900 dark:text-white mb-4" data-lang-key="toolsPageTitle">Our AI Tools</h1>
                        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-lang-key="toolsPageDescription">
                            Select a tool to get started with our AI Legal Assistant.
                        </p>
                    </div>
                    
                    <!-- Enhanced Search and Filter -->
                    <div class="max-w-2xl mx-auto mb-12">
                        <div class="search-container">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="tools-search" placeholder="Search legal tools..." class="search-input" onkeyup="filterTools()">
                        </div>
                        <div class="flex flex-wrap justify-center gap-2 mt-4" id="tools-filter">
                            <button onclick="filterByCategory('all')" class="filter-btn active px-4 py-2 rounded-full text-sm font-medium bg-blue-600 text-white micro-interaction">
                                All Tools
                            </button>
                            <button onclick="filterByCategory('analysis')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 micro-interaction">
                                Analysis
                            </button>
                            <button onclick="filterByCategory('drafting')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 micro-interaction">
                                Drafting
                            </button>
                            <button onclick="filterByCategory('research')" class="filter-btn px-4 py-2 rounded-full text-sm font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 micro-interaction">
                                Research
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
                        <button onclick="selectToolAndNavigate('legalDefinitions', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-gavel text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolLegalDefinitions">Legal Definitions</span>
                        </button>
                       <button onclick="selectToolAndNavigate('caseInsights', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-book-open text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolCaseInsights">Case Insights</span>
                        </button>
                         <button onclick="selectToolAndNavigate('aiCaseSummary', event)" class="col-span-2 sm:col-span-1 ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 ring-2 ring-blue-500">
                            <i class="fas fa-star text-3xl text-yellow-400 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolAiCaseSummary">AI Case Summary</span>
                        </button>
                        <button onclick="selectToolAndNavigate('draftPetition', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-file-signature text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolDraftPetition">Draft a Petition</span>
                        </button>
                        <button onclick="selectToolAndNavigate('explainNotice', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-search text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolExplainNotice">Explain a Notice</span>
                        </button>
                         <button onclick="selectToolAndNavigate('docGenerator', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-file-alt text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolDocGenerator">Document Generator</span>
                        </button>
                        <button onclick="selectToolAndNavigate('bareAct', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-balance-scale text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolBareAct">Bare Act Navigator</span>
                        </button>
                        <button onclick="selectToolAndNavigate('casePrediction', event)" class="ai-tool-btn text-left p-4 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <i class="fas fa-lightbulb text-3xl text-blue-500 mb-3"></i>
                            <span class="font-semibold block text-gray-800 dark:text-gray-200" data-lang-key="toolCasePrediction">Case Outcome Prediction</span>
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- AI Assistant Page -->
        <div id="ai-assistant-page" class="page hidden">
            <section class="py-12 sm:py-20 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                         <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white mb-4" data-lang-key="aiAssistantTitle">Excluziv AI Legal Assistant</h1>
                         <p class="text-lg text-gray-600 dark:text-gray-300" data-lang-key="aiAssistantSubtitle">Your copilot for navigating the complexities of Indian law.</p>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 sm:p-8">
                         <div class="mb-6">
                            <label class="block text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3" data-lang-key="chooseTool">Choose a Tool</label>
                            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3">
                                <button onclick="selectAiTool('legalDefinitions', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-gavel text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolLegalDefinitions">Legal Definitions</span>
                                </button>
                               <button onclick="selectAiTool('caseInsights', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-book-open text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolCaseInsights">Case Insights</span>
                                </button>
                                 <button onclick="selectAiTool('aiCaseSummary', this)" class="col-span-2 sm:col-span-1 ai-tool-btn text-left p-3 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/50 dark:hover:bg-blue-900 rounded-lg transition-all duration-200 ring-2 ring-blue-500">
                                    <i class="fas fa-star text-yellow-400"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolAiCaseSummary">AI Case Summary</span>
                                </button>
                                <button onclick="selectAiTool('draftPetition', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-file-signature text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolDraftPetition">Draft a Petition</span>
                                </button>
                                <button onclick="selectAiTool('explainNotice', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-search text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolExplainNotice">Explain a Notice</span>
                                </button>
                                 <button onclick="selectAiTool('docGenerator', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-file-alt text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolDocGenerator">Document Generator</span>
                                </button>
                                <button onclick="selectAiTool('bareAct', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-balance-scale text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolBareAct">Bare Act Navigator</span>
                                </button>
                                <button onclick="selectAiTool('casePrediction', this)" class="ai-tool-btn text-left p-3 bg-gray-100 hover:bg-blue-100 dark:bg-gray-700 dark:hover:bg-blue-900/50 rounded-lg transition-all duration-200">
                                    <i class="fas fa-lightbulb text-blue-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolCasePrediction">Case Outcome Prediction</span>
                                </button>
                            </div>
                        </div>

                         <!-- Advanced Tools Section -->
                        <div class="mb-6 mt-8">
                            <label class="block text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3" data-lang-key="advancedTools">Advanced Legal Tools</label>
                            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3">
                                <button onclick="selectAiTool('devilsAdvocate', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-balance-scale-left text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolDevilsAdvocate">Devil's Advocate</span>
                                </button>
                                <button onclick="selectAiTool('docCompare', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-exchange-alt text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolDocCompare">Doc Compare</span>
                                </button>
                                <button onclick="selectAiTool('strategySim', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-project-diagram text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolStrategySim">Strategy Simulator</span>
                                </button>
                                <button onclick="selectAiTool('regulatoryImpact', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-landmark text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolRegulatoryImpact">Regulatory Impact</span>
                                </button>
                                <button onclick="selectAiTool('stakeholder', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-users text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolStakeholder">Stakeholder Dynamics</span>
                                </button>
                                 <button onclick="selectAiTool('contractIntel', this)" class="ai-tool-btn text-left p-3 bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 rounded-lg transition-all duration-200">
                                    <i class="fas fa-network-wired text-indigo-500"></i>
                                    <span class="font-semibold block mt-1 text-gray-800 dark:text-gray-200 text-sm" data-lang-key="toolContractIntel">Contract Intelligence</span>
                                </button>
                            </div>
                        </div>

                        <div id="ai-chat-container" class="mt-6">
                            <!-- New Chat Button -->
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Legal Assistant</h3>
                                <div class="flex items-center space-x-2">
                                    <button onclick="startNewChat()" class="px-4 py-2 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition-colors">
                                        <i class="fas fa-plus mr-2"></i>New Chat
                                    </button>
                                    <!-- Reasoning Toggle Switch -->
                                    <div class="flex items-center space-x-2">
                                        <div class="relative">
                                            <input type="checkbox" id="reasoning-toggle" class="sr-only" />
                                            <label for="reasoning-toggle" class="flex items-center cursor-pointer">
                                                <div class="relative">
                                                    <div class="w-14 h-7 bg-gray-300 dark:bg-gray-600 rounded-full shadow-inner transition-colors duration-300 ease-in-out"></div>
                                                    <div class="absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out flex items-center justify-center">
                                                        <i class="fas fa-lightbulb text-yellow-500 text-sm transition-all duration-300 ease-in-out" id="bulb-icon"></i>
                                                    </div>
                                                </div>
                                                <span class="ml-2 text-xs font-semibold text-gray-700 dark:text-gray-300" id="reasoning-label">Reasoning Mode</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                             <div id="ai-chat-area" class="min-h-[45vh] mb-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg" style="transition: min-height 0.3s ease-in-out;">
                                <!-- Chat messages will be appended here -->
                            </div>
    
                            <div id="follow-up-questions" class="flex flex-wrap gap-2 mb-4">
                                <!-- Follow-up questions will be appended here -->
                            </div>
                            
                            <div class="mb-2">
                               <p class="text-sm text-gray-500 dark:text-gray-400 italic" data-lang-key="optimizerRecommendation">
                                    For better results, try our âœ¨ Prompt Optimizer before you submit!
                               </p>
                            </div>
                            <div class="relative">
                                <textarea id="ai-query-input" rows="6" class="w-full p-6 pr-28 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-gray-50 dark:bg-gray-700 text-lg text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500" placeholder="Place Your Query Here (Kuch bura nahi hoga, vishwas karo)"></textarea>
                                
                                <!-- Enhanced File Upload Area -->
                                <div id="file-drop-zone" class="file-drop-zone hidden absolute inset-0 flex items-center justify-center bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg border-2 border-dashed border-blue-400">
                                    <div class="text-center">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-blue-500 mb-4"></i>
                                        <p class="text-lg font-medium text-gray-700 dark:text-gray-300 mb-2">Drop files here</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">or click to browse</p>
                                    </div>
                                </div>
                                
                                <div class="absolute top-1/2 -translate-y-1/2 right-3 flex items-center space-x-2">
                                    <button id="optimize-prompt-btn" title="Optimize this prompt" class="text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 micro-interaction">
                                        <span class="text-lg">âœ¨</span>
                                    </button>
                                     <label for="file-upload" class="cursor-pointer text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 micro-interaction" title="Upload files">
                                        <i class="fas fa-paperclip text-lg"></i>
                                    </label>
                                    <input id="file-upload" type="file" class="hidden" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.bmp">
                                    <button onclick="generateAiResponse()" class="bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full transition-all shadow-md hover:shadow-lg transform hover:scale-110 micro-interaction">
                                        <i class="fas fa-arrow-up text-lg"></i>
                                    </button>
                                </div>
                            </div>
                            <div id="file-display-area" class="mt-3"></div>
                            <div id="file-upload-info" class="mt-2 text-xs text-gray-500 dark:text-gray-400">
                                <i class="fas fa-info-circle mr-1"></i>
                                Supported: PDF, DOCX, TXT, Images (max 10MB each)
                            </div>
                        </div>
                    </div>

                     <!-- History and FAQ Section -->
                     <div class="max-w-4xl mx-auto mt-12 animated-section">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
                            <button onclick="toggleHistory()" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                <span><i class="fas fa-history mr-2"></i><span data-lang-key="historyTitle">AI Assistant History</span></span>
                                <i id="history-chevron" class="fas fa-chevron-down transition-transform"></i>
                            </button>
                            <div id="history-content" class="hidden p-5 border-t border-gray-200 dark:border-gray-700 space-y-4">
                                <!-- History items will be injected here -->
                                <p id="history-placeholder" class="text-gray-500 dark:text-gray-400" data-lang-key="historyPlaceholder">No history yet. Ask the AI assistant a question to get started.</p>
                            </div>
                        </div>
                    </div>
                
                    <div class="max-w-4xl mx-auto mt-8 animated-section">
                        <h2 class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-10" data-lang-key="faqTitle">Frequently Asked Questions</h2>
                        <div class="space-y-4">
                            <div class="faq-item bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                <button onclick="toggleFaq(this)" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                    <span data-lang-key="faq1Title">Is the AI assistant a replacement for a lawyer?</span>
                                    <i class="fas fa-chevron-down transition-transform"></i>
                                </button>
                                <div class="faq-answer hidden p-5 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300" data-lang-key="faq1Answer">
                                    No. The Excluziv AI Assistant is a tool for informational and educational purposes only. It is not a substitute for professional legal advice from a qualified lawyer. For critical legal matters, always consult with a human legal expert.
                                </div>
                            </div>
                             <div class="faq-item bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                <button onclick="toggleFaq(this)" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                    <span data-lang-key="faq2Title">How accurate is the information provided?</span>
                                    <i class="fas fa-chevron-down transition-transform"></i>
                                </button>
                                <div class="faq-answer hidden p-5 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300" data-lang-key="faq2Answer">
                                    Our AI models are trained on a vast corpus of Indian legal documents, case law, and statutes. While we strive for high accuracy, the legal landscape is constantly evolving. The information should be verified and used as a starting point, not as a final, definitive source.
                                </div>
                            </div>
                            <div class="faq-item bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                <button onclick="toggleFaq(this)" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                    <span data-lang-key="faq3Title">What's the difference between Basic and Pro mode?</span>
                                    <i class="fas fa-chevron-down transition-transform"></i>
                                </button>
                                <div class="faq-answer hidden p-5 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300" data-lang-key="faq3Answer">
                                    <b>Basic Mode</b> is designed for quick, easy-to-understand answers to straightforward questions. <b>Pro Mode</b> leverages more advanced reasoning to provide detailed explanations, analyze context from your input, and generate comprehensive draft-level documents. Think of it as the difference between a quick summary and a detailed report.
                                </div>
                            </div>
                            <div class="faq-item bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                <button onclick="toggleFaq(this)" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                    <span data-lang-key="faq4Title">Is my data safe?</span>
                                    <i class="fas fa-chevron-down transition-transform"></i>
                                </button>
                                <div class="faq-answer hidden p-5 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300" data-lang-key="faq4Answer">
                                    We take your privacy seriously. If you sign in with Google, we only use your email for authentication and to save your history. We do not sell your data. Anonymous guest users have their history stored locally on their device and it is not sent to our servers.
                                </div>
                            </div>
                            <div class="faq-item bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                <button onclick="toggleFaq(this)" class="w-full flex justify-between items-center text-left p-5 font-semibold text-gray-800 dark:text-gray-200">
                                    <span data-lang-key="faq5Title">Can I save my chat history?</span>
                                    <i class="fas fa-chevron-down transition-transform"></i>
                                </button>
                                <div class="faq-answer hidden p-5 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300" data-lang-key="faq5Answer">
                                    Yes, your conversation history is automatically saved to your account if you sign in with Google. This allows you to continue your sessions across different devices. If you use the guest mode, your history is only saved on the browser you are currently using and will be lost if you clear your browser data.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- About Page -->
        <div id="about-page" class="page hidden">
             <section class="py-20 px-4 sm:px-6 lg:px-8">
                <div class="max-w-7xl mx-auto animated-section">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-extrabold text-gray-900 dark:text-white mb-4" data-lang-key="aboutTitle">About Excluziv</h1>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center mb-20 gap-12">
                        <div class="md:w-1/2">
                            <p class="text-xl text-gray-700 dark:text-gray-200 mb-6" data-lang-key="aboutText1">
                                Excluziv is India's first free Legal AI Assistant, built to empower legal professionals with instant insights, automate routine tasks and sharpen strategic decisionâ€‘making. Whether you're a solo practitioner drafting agreements, an inâ€‘house counsel handling corporate filings or a compliance officer monitoring regulatory updates, Excluziv delivers precise, upâ€‘toâ€‘date guidanceâ€”at no cost.
                            </p>
                            <p class="text-lg text-gray-600 dark:text-gray-300 mb-6" data-lang-key="aboutText2">
                                <b>Key Use Case</b><br>A Mumbai-based boutique law firm receives a client inquiry on amendments to the Insolvency and Bankruptcy Code and updated RBI guidelines on crossâ€‘border payments. Using Excluziv's AI-driven compliance module, their team:<br><br>â€¢ Uploads the client's corporate documents and transaction data.<br>â€¢ Quickly reviews relevant sections of IBC amendments and RBI circulars issued this quarter.<br>â€¢ Generates a concise memo outlining filing requirements, deadlines and potential penalties.<br>â€¢ Produces draft board resolutions and stakeholder notices tailored to the client's proposed restructuring.<br><br>This entire process is completed in under an hour, freeing lawyers to focus on client strategy and negotiation rather than manual research.
                            </p>
                            <p class="text-lg text-gray-600 dark:text-gray-300" data-lang-key="aboutText3">
                                At the intersection of Indian cryptocurrency regulation, AI policy and business compliance, Excluziv is your strategic partnerâ€”equipping you with the insights and tools to lead with confidence.
                            </p>
                        </div>
                        <div class="md:w-1/2 flex items-center justify-center p-8 bg-gray-100 dark:bg-gray-800/50 rounded-lg shadow-2xl">
                            <img src="https://i.ibb.co/tptYSRk3/Excuxziv-no-back.png" alt="Our Story" class="w-auto h-auto max-w-sm" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/300x100/F3F4F6/000000?text=Excluziv';">
                        </div>
                    </div>
                    
                    <div class="py-16 bg-gray-100 dark:bg-gray-800/50 rounded-xl px-8 animated-section">
                        <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-10 text-center" data-lang-key="coreOfferingsTitle">Why Excluziv?</h2>
                        <div class="max-w-4xl mx-auto">
                            <ul class="space-y-6 text-lg text-gray-700 dark:text-gray-200">
                                <li class="flex items-start"><span class="text-2xl mr-4">ðŸ”</span><span data-lang-key="offering1">Regulatory Intelligence: Continuous monitoring of Indian laws and notificationsâ€”so you're always aware of the latest Gazette notifications, RBI circulars and SEBI guidelines.</span></li>
                                <li class="flex items-start"><span class="text-2xl mr-4">ðŸ§¾</span><span data-lang-key="offering2">Compliance Consulting: Expert-backed analysis for startups, fintechs, NBFCs and established corporates navigating India's regulatory landscape.</span></li>
                                <li class="flex items-start"><span class="text-2xl mr-4">ðŸ§ </span><span data-lang-key="offering3">AIâ€‘Powered Legal Tools: Automated contract review, clauseâ€‘level risk assessment and fastâ€‘track legal research specific to Indian statutes and case law.</span></li>
                                <li class="flex items-start"><span class="text-2xl mr-4">ðŸ“Š</span><span data-lang-key="offering4">Business Case Studies & Analysis: In-depth studies of successful compliance strategies adopted by leading Indian enterprises and government bodies.</span></li>
                                <li class="flex items-start"><span class="text-2xl mr-4">ðŸ“¢</span><span data-lang-key="offering5">Highâ€‘Impact Content: Practical briefs, whitepapers and workshops designed for managing partners, general counsels and corporate legal teams.</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Blog Page -->
        <div id="blog-page" class="page hidden">
             <section class="py-20 px-4 sm:px-6 lg:px-8 animated-section">
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-extrabold text-gray-900 dark:text-white mb-4" data-lang-key="blogTitle">Excluziv Blog</h1>
                        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-lang-key="blogDescription">
                            Insights, news, and perspectives on legal technology and AI
                        </p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 mb-16" id="blog-posts-grid">
                        <!-- Blog Post Cards will be injected here by JavaScript -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Individual Blog Post Pages -->
        <div id="blog-post-container">
            <!-- Blog Post Content will be injected here by JavaScript -->
        </div>


        <!-- Team Page -->
        <div id="team-page" class="page hidden">
             <section class="py-20 px-4 sm:px-6 lg:px-8">
                <div class="max-w-7xl mx-auto animated-section">
                    <div class="text-center mb-16">
                        <h1 class="text-5xl font-extrabold text-gray-900 dark:text-white mb-4" data-lang-key="teamTitle">Our Team</h1>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center gap-12">
                        <div class="md:w-1/3 mb-10 md:mb-0">
                            <img src="https://i.ibb.co/pjFKTvVD/siddhant-whatapp-dp-1.jpg" alt="Siddhant Tiwari" class="rounded-xl shadow-2xl w-full h-auto mx-auto" style="max-width: 350px;" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/350x450/E2E8F0/4A5568?text=Siddhant';">
                        </div>
                        <div class="md:w-2/3 md:pl-12">
                            <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-2" data-lang-key="teamMemberName">Siddhant Tiwari</h2>
                            <div class="text-lg text-gray-600 dark:text-gray-300 mb-6" data-lang-key="teamMemberBio2">
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Page -->
         <div id="contact-page" class="page hidden">
             <section class="py-20 px-4 sm:px-6 lg:px-8">
                <div class="max-w-7xl mx-auto">
                    <div class="text-center mb-16">
                        <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="contactTitle">Contact Us</h1>
                        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-lang-key="contactDescription">
                            Get in touch with our team to learn more about our solutions
                        </p>
                    </div>
                    
                    <div class="flex flex-col md:flex-row">
                        <div class="md:w-1/2 mb-10 md:mb-0 md:pr-10">
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6" data-lang-key="contactInfoTitle">Contact Information</h2>
                            <div class="space-y-6">
                                 <div class="flex items-start">
                                    <div class="text-blue-600 dark:text-blue-400 mr-4 mt-1">
                                        <i class="fas fa-phone-alt text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1" data-lang-key="phoneLabel">Phone</h3>
                                        <p class="text-gray-600 dark:text-gray-300">
                                            +91-7974702342
                                        </p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start">
                                    <div class="text-blue-600 dark:text-blue-400 mr-4 mt-1">
                                        <i class="fas fa-envelope text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-1" data-lang-key="emailLabel">Email</h3>
                                        <p class="text-gray-600 dark:text-gray-300">
                                            <a href="mailto:work.excluziv@gmail.com" class="hover:underline">work.excluziv@gmail.com</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-10">
                                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6" data-lang-key="connectWithUs">Connect With Us</h2>
                                <div class="flex space-x-4">
                                    <a href="https://www.linkedin.com/company/excluziv-news" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 text-2xl flex items-center">
                                        <i class="fab fa-linkedin"></i><span class="ml-2">Excluziv</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:w-1/2">
                            <div class="bg-white dark:bg-gray-700 rounded-lg shadow-md p-8">
                                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6" data-lang-key="sendMessageTitle">Send Us a Message</h2>
                                <form>
                                    <div class="mb-6">
                                        <label for="name" class="block text-gray-700 dark:text-gray-300 font-medium mb-2" data-lang-key="nameLabel">Name</label>
                                        <input type="text" id="name" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white">
                                    </div>
                                    
                                    <div class="mb-6">
                                        <label for="email" class="block text-gray-700 dark:text-gray-300 font-medium mb-2" data-lang-key="emailLabel">Email</label>
                                        <input type="email" id="email" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white">
                                    </div>
                                    
                                    <div class="mb-6">
                                        <label for="subject" class="block text-gray-700 dark:text-gray-300 font-medium mb-2" data-lang-key="subjectLabel">Subject</label>
                                        <input type="text" id="subject" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white">
                                    </div>
                                    
                                    <div class="mb-6">
                                        <label for="message" class="block text-gray-700 dark:text-gray-300 font-medium mb-2" data-lang-key="messageLabel">Message</label>
                                        <textarea id="message" rows="5" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"></textarea>
                                    </div>
                                    
                                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-md font-medium transition duration-300 w-full" data-lang-key="sendMessageBtn">
                                        Send Message
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Widgets Container -->
    <div id="bottom-nav" class="fixed bottom-6 right-6 z-30 flex flex-col items-end space-y-4">
        <!-- WhatsApp Widget -->
        <a href="https://wa.me/917974702342" target="_blank" rel="noopener noreferrer" class="transition-transform duration-300 hover:scale-110">
            <div class="bg-green-500 hover:bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg">
                <i class="fab fa-whatsapp text-4xl"></i>
            </div>
        </a>
        <!-- Personal Assistant Widget -->
        <button onclick="toggleSimpleChat()" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg transition-transform duration-300 hover:scale-110">
            <i class="fas fa-robot text-2xl"></i>
        </button>
    </div>


  <!-- Chatbot Iframe Container -->
    <div id="chat-container" class="fixed bottom-24 right-6 bg-white dark:bg-gray-800 shadow-xl border border-gray-200 dark:border-gray-700 z-40 chat-container chat-hidden overflow-hidden">
        <!-- Close button for chatbot -->
        <button onclick="toggleSimpleChat()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl z-50 p-2 rounded-full bg-gray-100 dark:bg-gray-700">
            &times;
        </button>
       <iframe
            src="https://www.chatbase.co/chatbot-iframe/gEBglZfOKrn7M-u1pWRaZ"
            width="100%"
            style="height: calc(100% - 48px);"
            frameborder="0"
        ></iframe>
    </div>
    
    <!-- Auth Modal -->
    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-12 max-w-lg w-full text-center relative" style="min-width: 400px; min-height: 420px;">
            <button onclick="closeAuthModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl">&times;</button>
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="loginTitle">Login to Excluziv</h2>
            <p class="text-gray-600 dark:text-gray-300 mb-8" data-lang-key="loginDescription">Sign in to save your history or continue as a guest.</p>
            <div class="space-y-4">
                <button onclick="signInWithGoogle()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg w-full flex items-center justify-center transition-all duration-300">
                    <i class="fab fa-google text-xl mr-3"></i>
                    <span data-lang-key="signInGoogle">Sign in with Google</span>
                </button>
                <button onclick="showPhoneAuthModal()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg w-full flex items-center justify-center transition-all duration-300">
                    <i class="fas fa-mobile-alt text-xl mr-3"></i>
                    <span>Sign in with Mobile</span>
                </button>
                <button onclick="signInAsGuest()" class="bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg w-full flex items-center justify-center transition-all duration-300">
                     <i class="fas fa-user-secret text-xl mr-3"></i>
                     <span data-lang-key="signInGuest">Continue as Guest</span>
                </button>
            </div>
        </div>
    </div>


    <!-- Logout Confirmation Modal -->
    <div id="logout-confirm-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 max-w-sm text-center">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="confirmLogoutTitle">Confirm Logout</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-8" data-lang-key="confirmLogoutText">Are you sure you want to log out?</p>
            <div class="flex justify-center space-x-4">
                <button onclick="cancelLogout()" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg" data-lang-key="cancel">Cancel</button>
                <button onclick="confirmLogout()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-6 rounded-lg" data-lang-key="yesLogout">Yes, Logout</button>
            </div>
        </div>
    </div>
    
     <!-- Prompt Optimizer Modal -->
    <div id="optimizer-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 max-w-md w-full relative">
            <button onclick="closeOptimizerModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl">&times;</button>
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2" data-lang-key="optimizerTitle">âœ¨ Optimized Prompt</h3>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-4" data-lang-key="optimizerDescription">We've improved your prompt for clarity and better results. Use it as is or keep editing!</p>
            <div id="optimized-prompt-output" class="bg-gray-100 dark:bg-gray-700 p-4 rounded-md text-gray-800 dark:text-gray-200 mb-4"></div>
            <div class="flex justify-end space-x-3">
                <button onclick="closeOptimizerModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 rounded-md" data-lang-key="keepOriginal">Keep Original</button>
                <button id="use-optimized-btn" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md" data-lang-key="useThisVersion">Use this Version</button>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 px-4 sm:px-6 lg:px-8">
         <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="mb-6 md:mb-0">
                    <a href="#" onclick="showPage('home-page', event)" class="flex items-center mb-4">
                       <img src="https://i.ibb.co/tptYSRk3/Excuxziv-no-back.png" alt="Excluziv Logo" class="h-10 w-auto" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/100x40/374151/ffffff?text=Excluziv';">
                    </a>
                    <p class="text-gray-400" data-lang-key="heroDescription">
                        Revolutionizing legal services with AI-powered technology to make legal expertise more accessible and efficient.
                    </p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4" data-lang-key="quickLinks">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#" onclick="showPage('home-page', event)" class="text-gray-400 hover:text-white transition duration-300" data-lang-key="home">Home</a></li>
                        <li><a href="#" onclick="showPage('about-page', event)" class="text-gray-400 hover:text-white transition duration-300" data-lang-key="about">About</a></li>
                        <li><a href="#" onclick="showPage('blog-page', event)" class="text-gray-400 hover:text-white transition duration-300" data-lang-key="blog">Blog</a></li>
                        <li><a href="#" onclick="showPage('team-page', event)" class="text-gray-400 hover:text-white transition duration-300" data-lang-key="team">Team</a></li>
                         <li><a href="#" onclick="showPage('contact-page', event)" class="text-gray-400 hover:text-white transition duration-300" data-lang-key="contact">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4" data-lang-key="footerServices">Services</h4>
                    <ul class="space-y-2">
                        <li class="text-gray-400" data-lang-key="service1Title">AI Legal Assistant</li>
                        <li class="text-gray-400" data-lang-key="service2Title">Document Automation</li>
                        <li class="text-gray-400" data-lang-key="service3Title">Case Analysis</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4" data-lang-key="footerConnect">Connect</h4>
                     <div class="space-y-3 mb-4">
                        <p class="text-gray-400 flex items-center"><i class="fas fa-envelope mr-2"></i><a href="mailto:work.excluziv@gmail.com" class="hover:text-white transition">work.excluziv@gmail.com</a></p>
                        <p class="text-gray-400 flex items-center"><i class="fas fa-phone-alt mr-2"></i>+91-7974702342</p>
                    </div>
                    <div class="flex space-x-4">
                        <a href="https://www.linkedin.com/company/excluziv-news" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300 text-2xl flex items-center">
                            <i class="fab fa-linkedin"></i><span class="ml-2">Excluziv</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p><span data-lang-key="footerRights">&copy; 2024 Excluziv. All rights reserved.</span> | <a href="#" class="hover:text-white" data-lang-key="privacyPolicy">Privacy Policy</a> | <a href="#" class="hover:text-white" data-lang-key="termsOfService">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <!-- Phone Auth Modal -->
    <div id="phone-auth-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 max-w-md w-full text-center relative">
            <button onclick="closePhoneAuthModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl">&times;</button>
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Sign in with Mobile</h2>
            <div id="phone-auth-step-phone">
                <div class="flex mb-6 gap-3">
                  <select id="country-code-select" class="w-32 bg-white text-gray-900 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" style="min-width: 120px; max-width: 160px;">
                    <option value="+91" selected>ðŸ‡®ðŸ‡³ +91</option>
                    <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
                    <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
                    <option value="+61">ðŸ‡¦ðŸ‡º +61</option>
                    <option value="+971">ðŸ‡¦ðŸ‡ª +971</option>
                    <!-- Add more as needed -->
                  </select>
                  <input id="phone-number-input" type="tel" placeholder="Enter mobile number"
                    class="flex-1 bg-white text-gray-900 border border-gray-300 dark:border-gray-600 rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                </div>
                <div id="recaptcha-container" class="mb-6"></div>
                <button onclick="sendOtp()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg w-full mb-3">Send OTP</button>
            </div>
            <div id="phone-auth-step-otp" class="hidden">
                <input id="otp-input" type="text" placeholder="Enter OTP" class="w-full bg-white text-gray-900 border border-gray-300 dark:border-gray-600 rounded-md px-4 py-3 mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                <button onclick="verifyOtp()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg w-full mb-3">Verify OTP</button>
                <button onclick="resendOtp()" class="text-blue-600 hover:underline text-sm">Resend OTP</button>
            </div>
            <div id="phone-auth-message" class="mt-4 text-sm"></div>
        </div>
    </div>

    <script>
        // --- Blog Post Data ---
        const blogPosts = [
            {
                id: 1,
                image: "https://images.unsplash.com/photo-1556742049-0cfed3f6b3a6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "Jan 10, 2025",
                category: "LegalTech",
            },
            {
                id: 2,
                image: "https://images.unsplash.com/photo-1678483747979-9921683457a3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "Feb 05, 2025",
                category: "AI in Law",
            },
            {
                id: 3,
                image: "https://images.unsplash.com/photo-1556155092-490a1ba16284?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "Mar 12, 2025",
                category: "Automation",
            },
            {
                id: 4,
                image: "https://images.unsplash.com/photo-1504711331083-90a78131340d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "Apr 02, 2025",
                category: "Compliance",
            },
            {
                id: 5,
                image: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "Apr 28, 2025",
                category: "AI Ethics",
            },
            {
                id: 6,
                image: "https://images.unsplash.com/photo-1665686306574-1ace09918530?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "May 15, 2025",
                category: "Analytics",
            },
            {
                id: 7,
                image: "https://images.unsplash.com/photo-1589998059171-988d887df646?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "June 01, 2025",
                category: "Document Review",
            },
            {
                id: 8,
                image: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                date: "June 18, 2025",
                category: "Future of Law",
            }
        ];

        // --- Translations ---
         const translations = {
            en: {
                home: "Home", about: "About", blog: "Blog", team: "Team", tools: "Tools", contact: "Contact",
                tryAiAssistant: "Try AI Assistant",
                tryAiAssistantFree: "Try AI Assistant for FREE",
                logout: "Logout",
                confirmLogoutTitle: "Confirm Logout", confirmLogoutText: "Are you sure you want to log out?",
                cancel: "Cancel", yesLogout: "Yes, Logout",
                disclaimerTitle: "Important Disclaimer", 
                disclaimerText: "AI can make mistakes. The information provided is for educational purposes only. Please seek professional legal advice for any serious matters.",
                okUnderstand: "OK, I Understand",
                authFailedError: "Authentication failed. Please try again.",
                guestLoginFailedError: "Guest login failed. Please try again.",
                heroTitle: "Revolutionizing Legal Services with",
                heroSubtitle: "AI Technology",
                heroDescription: "Excluziv provides cutting-edge legal-tech solutions to streamline your legal processes and enhance efficiency with artificial intelligence.",
                learnMore: "Learn More",
                servicesTitle: "Our Services",
                servicesDescription: "We offer comprehensive legal-tech solutions tailored to your specific needs.",
                service1Title: "AI Legal Assistant",
                service1Description: "Our AI-powered assistant provides instant answers to legal questions, helping you navigate complex legal matters with ease.",
                service2Title: "Document Automation",
                service2Description: "Generate legal documents in minutes with our smart templates that adapt to your specific requirements.",
                service3Title: "Contract Review & Analysis",
                service3Description: "Leverage AI to analyze contracts, identify risks, and ensure compliance with legal standards.",
                service4Title: "Discovery Document Analyzer",
                service4Description: "Efficiently sift through large volumes of discovery documents to find key evidence and insights.",
                service5Title: "Compliance Checker",
                service5Description: "Automatically audit documents and business processes against regulatory checklists to ensure compliance.",
                service6Title: "GDPR Privacy Services",
                service6Description: "Assess and manage your data privacy obligations under GDPR and other data protection regulations.",
                testimonialsTitle: "What Our Clients Say",
                testimonialsDescription: "Trusted by legal professionals and businesses worldwide.",
                testimonial1: `"Excluziv's AI assistant has transformed how we handle client inquiries. It's like having an extra associate available 24/7."`,
                testimonial2: `"The document automation tool has saved us hundreds of hours. The accuracy and customization options are impressive."`,
                testimonial3: `"As a solo practitioner, Excluziv's tools have leveled the playing field for me. I can compete with much larger firms now."`,
                submitQueryTitle: "Submit Your Query",
                submitQueryDescription: "Have a question? Fill out the form below and we'll get back to you.",
                submitInquiry: "Submit Your Inquiry",
                aboutTitle: "About Excluziv",
                aboutText1: "Excluziv is India's first free Legal AI Assistant, built to empower legal professionals with instant insights, automate routine tasks and sharpen strategic decisionâ€‘making. Whether you're a solo practitioner drafting agreements, an inâ€‘house counsel handling corporate filings or a compliance officer monitoring regulatory updates, Excluziv delivers precise, upâ€‘toâ€‘date guidanceâ€”at no cost.",
                aboutText2: "<b>Key Use Case</b><br>A Mumbai-based boutique law firm receives a client inquiry on amendments to the Insolvency and Bankruptcy Code and updated RBI guidelines on crossâ€‘border payments. Using Excluziv's AI-driven compliance module, their team:<br><br>â€¢ Uploads the client's corporate documents and transaction data.<br>â€¢ Quickly reviews relevant sections of IBC amendments and RBI circulars issued this quarter.<br>â€¢ Generates a concise memo outlining filing requirements, deadlines and potential penalties.<br>â€¢ Produces draft board resolutions and stakeholder notices tailored to the client's proposed restructuring.<br><br>This entire process is completed in under an hour, freeing lawyers to focus on client strategy and negotiation rather than manual research.",
                aboutText3: "At the intersection of Indian cryptocurrency regulation, AI policy and business compliance, Excluziv is your strategic partnerâ€”equipping you with the insights and tools to lead with confidence.",
                coreOfferingsTitle: "Why Excluziv?",
                offering1: "Regulatory Intelligence: Continuous monitoring of Indian laws and notificationsâ€”so you're always aware of the latest Gazette notifications, RBI circulars and SEBI guidelines.",
                offering2: "Compliance Consulting: Expert-backed analysis for startups, fintechs, NBFCs and established corporates navigating India's regulatory landscape.",
                offering3: "AIâ€‘Powered Legal Tools: Automated contract review, clauseâ€‘level risk assessment and fastâ€‘track legal research specific to Indian statutes and case law.",
                offering4: "Business Case Studies & Analysis: In-depth studies of successful compliance strategies adopted by leading Indian enterprises and government bodies.",
                offering5: "Highâ€‘Impact Content: Practical briefs, whitepapers and workshops designed for managing partners, general counsels and corporate legal teams.",
                blogTitle: "Excluziv Blog",
                blogDescription: "Insights, news, and perspectives on legal technology and AI",
                readMore: "Read More â†’",
                backToBlog: "â† Back to Blog",
                teamTitle: "Our Team",
                teamMemberName: "Siddhant Tiwari",
                teamMemberBio2: "A graduate of Damodaram Sanjivayya National Law University (2024) and master's from National Law University, Odisha (2025), Siddhant brings a unique blend of legal acumen, business understanding, and AI expertise.<br><br>With a strong foundation in legal strategy and a passion for innovation, Siddhant offers a distinctive mix of legal knowledge, strategic insight, and content excellence.<br><br>An ardent believer in the power of AI to transform the legal industry, Siddhant has worked at the intersection of law, policy, and innovationâ€”helping early-stage startups and companies navigate regulatory challenges with clarity and confidence.<br><br>ðŸ“§ siddhant.tiwari.work@gmail.com<br>ðŸ”— <a href='https://www.linkedin.com/in/siddhant-tiwari-law-2024-llm/' target='_blank' rel='noopener noreferrer' class='hover:underline'>LinkedIn</a>",
                contactTitle: "Contact Us",
                contactDescription: "Get in touch with our team to learn more about our solutions",
                contactInfoTitle: "Contact Information",
                phoneLabel: "Phone",
                emailLabel: "Email",
                connectWithUs: "Connect With Us",
                sendMessageTitle: "Send Us a Message",
                nameLabel: "Name",
                subjectLabel: "Subject",
                messageLabel: "Message",
                sendMessageBtn: "Send Message",
                quickLinks: "Quick Links",
                footerServices: "Services",
                footerConnect: "Connect",
                footerRights: "Â© 2024 Excluziv. All rights reserved.",
                privacyPolicy: "Privacy Policy",
                termsOfService: "Terms of Service",
                loginTitle: "Login to Excluziv",
                loginDescription: "Sign in to save your history or continue as a guest.",
                signInGoogle: "Sign in with Google",
                signInGuest: "Continue as Guest",
                toolsPageTitle: "Our AI Tools",
                toolsPageDescription: "Select a tool to get started with our AI Legal Assistant.",
                toolLegalDefinitions: "Legal Definitions",
                toolCaseInsights: "Case Insights",
                toolAiCaseSummary: "AI Case Summary",
                toolDraftPetition: "Draft a Petition",
                toolExplainNotice: "Explain a Notice",
                toolDocGenerator: "Document Generator",
                toolBareAct: "Bare Act Navigator",
                toolCasePrediction: "Case Outcome Prediction",
                advancedTools: "Advanced Legal Tools",
                toolDevilsAdvocate: "Devil's Advocate",
                toolDocCompare: "Doc Compare",
                toolStrategySim: "Strategy Simulator",
                toolRegulatoryImpact: "Regulatory Impact",
                toolStakeholder: "Stakeholder Dynamics",
                toolContractIntel: "Contract Intelligence",
                aiAssistantTitle: "Excluziv AI Legal Assistant",
                aiAssistantSubtitle: "Your copilot for navigating the complexities of Indian law.",
                selectMode: "1. Select Your Mode",
                basicMode: "Basic Mode",
                basicModeDesc: "Short, clear answers for quick FAQs.",
                proMode: "Pro Mode",
                proModeDesc: "Detailed explanations & draft-level output.",
                chooseTool: "Choose a Tool",
                copy: "Copy",
                redo: "Redo",
                historyTitle: "AI Assistant History",
                historyPlaceholder: "No history yet. Ask the AI assistant a question to get started.",
                faqTitle: "Frequently Asked Questions",
                faq1Title: "Is the AI assistant a replacement for a lawyer?",
                faq1Answer: "No. The Excluziv AI Assistant is a tool for informational and educational purposes only. It is not a substitute for professional legal advice from a qualified lawyer. For critical legal matters, always consult with a human legal expert.",
                faq2Title: "How accurate is the information provided?",
                faq2Answer: "Our AI models are trained on a vast corpus of Indian legal documents, case law, and statutes. While we strive for high accuracy, the legal landscape is constantly evolving. The information should be verified and used as a starting point, not as a final, definitive source.",
                faq3Title: "What's the difference between Basic and Pro mode?",
                faq3Answer: "<b>Basic Mode</b> is designed for quick, easy-to-understand answers to straightforward questions. <b>Pro Mode</b> leverages more advanced reasoning to provide detailed explanations, analyze context from your input, and generate comprehensive draft-level documents. Think of it as the difference between a quick summary and a detailed report.",
                faq4Title: "Is my data safe?",
                faq4Answer: "We take your privacy seriously. If you sign in with Google, we only use your email for authentication and to save your history. We do not sell your data. Anonymous guest users have their history stored locally on their device and it is not sent to our servers.",
                faq5Title: "Can I save my chat history?",
                faq5Answer: "Yes, your conversation history is automatically saved to your account if you sign in with Google. This allows you to continue your sessions across different devices. If you use the guest mode, your history is only saved on the browser you are currently using and will be lost if you clear your browser data.",
                aiQueryPlaceholder: "Place Your Query Here (Kuch bura nahi hoga, vishwas karo)",
                optimizerTitle: "Optimized Prompt",
                optimizerDescription: "We've improved your prompt for clarity and better results. Use it as is or keep editing!",
                keepOriginal: "Keep Original",
                useThisVersion: "Use this Version",
                 optimizerRecommendation: "For better results, try our âœ¨ Prompt Optimizer before you submit!",
                 // Blog post titles and descriptions for the main blog page
                "blog1_title": "Beyond the Hype: The Real Impact of LegalTech on Modern Law Firms",
                "blog1_desc": "Explore how LegalTech is moving beyond buzzwords to deliver tangible value, reshaping client services, and defining the future of legal practice.",
                "blog2_title": "AI as a Co-Pilot: How Artificial Intelligence is Redefining the Role of Lawyers",
                "blog2_desc": "Discover how AI is not replacing lawyers but augmenting their abilities, acting as a powerful co-pilot for research, analysis, and strategy.",
                "blog3_title": "From Draft to Digital: The Unstoppable Rise of Contract Automation",
                "blog3_desc": "Learn how automating the contract lifecycle is revolutionizing efficiency, reducing risk, and freeing up legal professionals for higher-value work.",
                "blog4_title": "Staying Ahead of the Curve: Leveraging AI for Proactive Legal Compliance",
                "blog4_desc": "Move from reactive to proactive compliance. See how AI tools can monitor regulatory changes and ensure your organization remains compliant.",
                "blog5_title": "The Digital Gavel: Navigating the Ethical Maze of AI in Legal Services",
                "blog5_desc": "A deep dive into the critical ethical questions surrounding AI in law, from algorithmic bias to client confidentiality and the duty of competence.",
                "blog6_title": "Crystal Ball or Calculated Risk? The Power of Predictive Analytics in Law",
                "blog6_desc": "Uncover how data-driven insights are forecasting case outcomes, informing litigation strategy, and providing a competitive edge.",
                "blog7_title": "The End of Due Diligence as We Know It: AI-Powered Document Review is Here",
                "blog7_desc": "Examine the technology that is transforming document review from a manual slog into a fast, accurate, and insightful automated process.",
                "blog8_title": "The AI-Enhanced Attorney: Charting the Future of Legal Consultancy",
                "blog8_desc": "What does the law firm of the future look like? Explore the new business models and skill sets required to thrive in the AI era."
            },
        };

        let currentLanguage = 'en';

        // --- Language and Theme ---
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            document.documentElement.lang = lang;

            // Translate all general UI elements
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[lang] && translations[lang][key]) {
                     // Use innerHTML for keys that may contain HTML tags, otherwise use innerText
                    if (['faq1Answer', 'faq2Answer', 'faq3Answer', 'faq4Answer', 'faq5Answer', 'teamMemberBio2', 'aboutText2'].includes(key)) {
                        el.innerHTML = translations[lang][key];
                    } else {
                        el.innerText = translations[lang][key];
                    }
                }
            });
            
            // Translate blog listing page titles and descriptions
            const blogGrid = document.getElementById('blog-posts-grid');
            if(blogGrid) {
                blogPosts.forEach(post => {
                    const titleEl = document.querySelector(`#blog-card-${post.id} [data-lang-key="blog${post.id}_title"]`);
                    const descEl = document.querySelector(`#blog-card-${post.id} [data-lang-key="blog${post.id}_desc"]`);
                    if(titleEl && translations[lang][`blog${post.id}_title`]) titleEl.innerText = translations[lang][`blog${post.id}_title`];
                    if(descEl && translations[lang][`blog${post.id}_desc`]) descEl.innerText = translations[lang][`blog${post.id}_desc`];
                });
            }

            // Translate the currently visible full blog post page
            const visiblePost = document.querySelector('.blog-post-page:not(.hidden)');
            if(visiblePost) {
                const postId = visiblePost.id.split('-')[2];
                const postLangData = blogTranslations[`blog${postId}`][lang];
                if(postLangData) {
                    Object.keys(postLangData).forEach(key => {
                        const el = visiblePost.querySelector(`[data-blog-key="${key}"]`);
                        if(el) el.innerHTML = postLangData[key];
                    });
                }
            }
            
            // Update active language button style
            document.querySelectorAll('.lang-btn').forEach(btn => {
                 btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // Update placeholder text for the main query input
            const queryInput = document.getElementById('ai-query-input');
            if (queryInput) {
                const placeholderKey = 'aiQueryPlaceholder';
                if (translations[lang] && translations[lang][placeholderKey]) {
                    queryInput.placeholder = translations[lang][placeholderKey];
                }
            }
        }
        
        // This function is a helper to get a translation string safely
        function getCurrentTranslation(key) { return translations[currentLanguage] ? (translations[currentLanguage][key] || key) : key; }
        
        // --- Page Navigation & Modals ---
        window.showPage = function(pageId, event) {
            if (event) event.preventDefault();
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            const newPage = document.getElementById(pageId);
            if (newPage) {
                 newPage.classList.remove('hidden');
                 const animatedSection = newPage.querySelector('.animated-section');
                 if(animatedSection) {
                    animatedSection.classList.remove('visible');
                    setTimeout(() => animatedSection.classList.add('visible'), 10);
                 }
            } else {
                document.getElementById('home-page').classList.remove('hidden');
            }
            window.scrollTo(0, 0);
            if (typeof closeMenu === 'function') {
                closeMenu();
            }
        }

        window.showAiAssistantPage = function(event) {
            if (event) event.preventDefault();
            const user = window.auth.currentUser;
            if (user) { 
                 showPage('ai-assistant-page');
            } else {
                document.getElementById('auth-modal').classList.remove('hidden');
            }
        }
        
        window.closeAuthModal = function() {
            document.getElementById('auth-modal').classList.add('hidden');
        }

        window.selectToolAndNavigate = function(tool, event) {
            if (event) event.preventDefault();
            const user = window.auth.currentUser;
            if (user) {
                showPage('ai-assistant-page');
                const toolButtonOnAiPage = document.querySelector(`#ai-assistant-page .ai-tool-btn[onclick*="selectAiTool('${tool}'")]`);
                if(window.selectAiTool) window.selectAiTool(tool, toolButtonOnAiPage);
            } else {
                 document.getElementById('auth-modal').classList.remove('hidden');
            }
        }
        
        // --- AI Assistant Logic ---
        let aiState = {
            mode: 'basic',
            tool: 'aiCaseSummary',
            query: '',
            lastVersion: 'basic',
            files: []
        };

        // Add variable to store the last AI response for follow-up context
        let lastAiAnswer = '';
        // After lastAiAnswer variable, add variable for last user query
        let lastUserQuery = '';

        // Backend endpoint
        const BACKEND_URL = 'https://excluziv-backend.onrender.com/api/ask';

        // Call AI API for all tasks (reasoning and non-reasoning)
        async function ExcluzivAI(query, enableReasoning = false) {
            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ prompt: query, tool: aiState.tool, reasoning: enableReasoning })
                });
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }
                const data = await response.json();
                if (data.answer) {
                    return data.answer;
                } else if (data.candidates && data.candidates.length > 0) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('No response from backend');
                }
            } catch (error) {
                console.error('Backend error:', error);
                throw error;
            }
        }

        window.generateAiResponse = async function(followUpQuery = null) {
            const queryInput = document.getElementById('ai-query-input');
            const userQuery = followUpQuery || queryInput.value.trim();
            // Ensure the backend receives the actual query
            aiState.query = userQuery;
            lastUserQuery = userQuery; // store user query for context
            if (!userQuery && !aiState.files.length) {
                showCustomAlert('Please enter a query or upload a file.');
                return;
            }
            // Doc Compare mode: require at least two files
            if (aiState.tool === 'docCompare' && aiState.files.length < 2) {
                showCustomAlert('Please upload at least two files for document comparison.');
                return;
            }
            let fileInfo = aiState.files.length > 0 ? `[Files uploaded: ${aiState.files.map(f => f.name).join(', ')}] ` : '';
            let fileContents = '';
            if (aiState.files && aiState.files.length > 0 && window.extractedFileContents) {
                aiState.files.forEach((file, idx) => {
                    if (window.extractedFileContents[idx]) {
                        fileContents += `\n\n[File: ${file.name}]\n${window.extractedFileContents[idx]}`;
                    }
                });
            } else if (window.extractedFileContent) {
                fileContents = `\n\n[File Content for AI only, not shown to user]:\n${window.extractedFileContent}`;
            }
            const userMessage = {
                role: "user",
                parts: [{ text: fileInfo + userQuery + fileContents }]
            };
            messages.push(userMessage);
            appendMessage(userQuery, 'user');
            queryInput.value = '';
            
            const chatArea = document.getElementById('ai-chat-area');
            const loadingIndicator = document.createElement('div');
            loadingIndicator.innerHTML = '<div class="flex items-center"><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-3"></div><span>Generating response...</span></div>';
            chatArea.appendChild(loadingIndicator);
            chatArea.scrollTop = chatArea.scrollHeight;
            
            // Decide if reasoning mode should be used
            let useReasoning = window.reasoningModeEnabled;

            if (useReasoning) {
                try {
                    const answer = await ExcluzivAI(userQuery, true);
                    if (loadingIndicator) loadingIndicator.remove();
                    const assistantMessage = { role: 'model', parts: [{ text: answer }] };
                    messages.push(assistantMessage);
                    appendMessage(answer, 'model');
                    generateFollowUpQuestions(userQuery, answer);
                    // Store answer for next follow-up
                    lastAiAnswer = answer;
                    lastUserQuery = aiState.query;
                } catch (error) {
                    if (loadingIndicator) loadingIndicator.remove();
                    appendMessage(`<p class='text-red-500'>AI reasoning error: ${error.message}</p>`, 'model');
                }
                return;
            }

            await getFinalResponse(loadingIndicator);
        }
        
        async function getFinalResponse(loadingIndicator) {
            try {
                const contextPayload = lastAiAnswer ? `Previous user query: ${lastUserQuery}\nAI answer: ${lastAiAnswer}` : '';
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: aiState.query, tool: aiState.tool, context: contextPayload })
                });
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                const result = await response.json();
                if (loadingIndicator) loadingIndicator.remove();
                let text = result.answer || (result.candidates && result.candidates[0].content.parts[0].text) || 'No answer.';
                const assistantMessage = {
                    role: "model",
                    parts: [{ text: text }]
                };
                messages.push(assistantMessage);
                appendMessage(text, 'model');
                generateFollowUpQuestions(aiState.query, text);
                lastAiAnswer = text;
                lastUserQuery = aiState.query;
            } catch (error) {
                console.error("API call failed:", error);
                if (loadingIndicator) loadingIndicator.remove();
                appendMessage(`<p class=\"text-red-500\">Sorry, an error occurred: ${error.message}</p>`, 'model');
            }
        }
        
        async function generateFollowUpQuestions(originalQuery, responseText) {
            const followUpContainer = document.getElementById('follow-up-questions');
            followUpContainer.innerHTML = '';
            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: `Based on the user's query \"${originalQuery}\" and the AI response \"${responseText}\", generate three concise, relevant follow-up questions the user might have. Return the questions as a JSON array of strings, like ["question 1", "question 2", "question 3"].`, tool: 'followup' })
                });
                const result = await response.json();
                let questions = [];
                if (result.answer) {
                    try { questions = JSON.parse(result.answer); } catch { questions = []; }
                } else if (result.candidates && result.candidates.length > 0) {
                    let rawText = result.candidates[0].content.parts[0].text;
                    const jsonMatch = rawText.match(/\[.*\]/s);
                    if(jsonMatch) {
                       questions = JSON.parse(jsonMatch[0]);
                    }
                }
                questions.forEach(q => {
                    const button = document.createElement('button');
                    button.className = 'bg-gray-200 dark:bg-gray-700 text-sm p-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600';
                    button.textContent = q;
                    button.onclick = () => generateAiResponse(q);
                    followUpContainer.appendChild(button);
                });
            } catch (error) {
                console.error("Follow-up generation failed:", error);
            }
        }

        window.setAiMode = function(mode) {
            aiState.mode = mode;
            const basicBtn = document.getElementById('mode-basic');
            const proBtn = document.getElementById('mode-pro');
            if (mode === 'basic') {
                basicBtn.classList.add('bg-blue-600', 'text-white');
                basicBtn.classList.remove('text-gray-600', 'dark:text-gray-300');
                proBtn.classList.remove('bg-blue-600', 'text-white');
                proBtn.classList.add('text-gray-600', 'dark:text-gray-300');
            } else {
                proBtn.classList.add('bg-blue-600', 'text-white');
                proBtn.classList.remove('text-gray-600', 'dark:text-gray-300');
                basicBtn.classList.remove('bg-blue-600', 'text-white');
                basicBtn.classList.add('text-gray-600', 'dark:text-gray-300');
            }
        }

        window.selectAiTool = function(tool, element) {
            aiState.tool = tool;
            document.querySelectorAll('.ai-tool-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500');
            });
            if(element) {
                element.classList.add('ring-2', 'ring-blue-500');
            }
            const examples = {
                en: {
                    legalDefinitions: 'What is "Bail"?',
                    caseInsights: 'Summarize Kesavananda Bharati v. State of Kerala',
                    aiCaseSummary: 'A defective product caused injury. What case is relevant?',
                    draftPetition: 'Draft a bail application for a client.',
                    explainNotice: 'Explain a legal notice for non-payment of rent.',
                    docGenerator: 'Generate a rental agreement for a property in Mumbai.',
                    bareAct: 'Explain Section 420 of the Indian Penal Code.',
                    casePrediction: 'Scenario: A person was caught with a small quantity of a banned substance for the first time. What could be the likely outcome?',
                    devilsAdvocate: 'Present your legal position or argument and get comprehensive counter-analysis.',
                    docCompare: 'Upload two or more document versions to get a detailed change analysis.',
                    strategySim: 'Input your case details to explore various strategic approaches.',
                    regulatoryImpact: 'Describe your situation to get analysis of relevant regulatory impacts.',
                    stakeholder: 'Input all parties and relationships to get comprehensive stakeholder analysis.',
                    contractIntel: 'Upload multiple related contracts and get intelligent relationship mapping.',
                },
            };
            
            document.getElementById('ai-query-input').value = examples[currentLanguage][tool] || '';
            document.getElementById('ai-query-input').focus();
        }

        // Full conversation memory system
        let messages = [];
        
        // Initialize conversation with system instruction
        function initializeConversation() {
            messages = [{
                role: "user",
                parts: [{
                    text: "You are an AI legal assistant embedded in a web application. Always remember our previous conversation and provide comprehensive legal reasoning. When users give follow-up instructions like 'Give it in IRAC format,' 'Make it simple,' or 'Explain in bullet points,' apply those instructions to our previous discussion context. Never say 'I have no memory of past conversations' - instead, build upon our conversation history to provide accurate, contextual responses."
                }]
            }];
        }

        // Add "New Chat" functionality
        function startNewChat() {
            messages = [];
            lastAiAnswer = '';
            initializeConversation();
            document.getElementById('ai-chat-area').innerHTML = '';
            document.getElementById('follow-up-questions').innerHTML = '';
            console.log('New chat started');
        }

        // Reasoning mode state
        window.reasoningModeEnabled = false;
        
        // Initialize toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const reasoningToggle = document.getElementById('reasoning-toggle');
            if (reasoningToggle) {
                reasoningToggle.addEventListener('change', function() {
                    window.reasoningModeEnabled = this.checked;
                    const label = document.getElementById('reasoning-label');
                    if (window.reasoningModeEnabled) {
                        label.textContent = 'Reasoning Mode ON';
                    } else {
                        label.textContent = 'Reasoning Mode';
                    }
                });
            }
        });

        // Call AI API for all tasks (reasoning and non-reasoning)
        async function ExcluzivAI(query, enableReasoning = false) {
            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ prompt: query, tool: aiState.tool, reasoning: enableReasoning })
                });
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }
                const data = await response.json();
                if (data.answer) {
                    return data.answer;
                } else if (data.candidates && data.candidates.length > 0) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('No response from backend');
                }
            } catch (error) {
                console.error('Backend error:', error);
                throw error;
            }
        }

        function formatMarkdown(text) {
             // More robust markdown conversion
            let html = text
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/`([^`]+)`/g, '<code>$1</code>')
                .replace(/^- (.*$)/gim, '<li>$1</li>');
            
            html = html.replace(/<li>/g, '<ul><li>').replace(/<\/li>\n(?!<li>)/g, '</li></ul>');
            
            return html.replace(/\n/g, '<br />').replace(/<br \/><ul>/g, '<ul>').replace(/<\/ul><br \/>/g, '</ul>');
        }
        
       function appendMessage(content, role) {
            const chatArea = document.getElementById('ai-chat-area');
            const messageDiv = document.createElement('div');
            const messageId = 'msg-' + Date.now();

            // Enhanced chat interface with better message bubbles
            if (role === 'user') {
                messageDiv.className = 'chat-message user-message';
                messageDiv.innerHTML = `
                    <div class="message-bubble user-bubble">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-user mr-2 text-white/80"></i>
                            <span class="text-sm font-medium text-white/90">You</span>
                        </div>
                        <div class="text-white">${escapeHtml(content)}</div>
                    </div>
                `;
            } else {
                messageDiv.className = 'chat-message ai-message';
                messageDiv.innerHTML = `
                    <div class="message-bubble ai-bubble">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-robot mr-2 text-blue-600 dark:text-blue-400"></i>
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">AI Assistant</span>
                        </div>
                        <div id="${messageId}" class="prose dark:prose-invert max-w-none text-gray-800 dark:text-gray-200">${formatMarkdown(content)}</div>
                        <div class="mt-3 pt-2 border-t border-gray-200 dark:border-gray-600 flex items-center justify-end space-x-4">
                            <button onclick="copyMessageContent('${messageId}')" class="micro-interaction text-gray-600 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 text-sm font-medium p-1 rounded">
                                <i class="fas fa-copy mr-1"></i><span data-lang-key="copy">Copy</span>
                            </button>
                            <button onclick="redoQuery()" class="micro-interaction text-gray-600 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 text-sm font-medium p-1 rounded">
                                <i class="fas fa-redo mr-1"></i><span data-lang-key="redo">Redo</span>
                            </button>
                        </div>
                    </div>
                `;
            }
            
            chatArea.appendChild(messageDiv);
            messageDiv.scrollIntoView({ behavior: "smooth", block: "end" });
            
            // Translate the dynamically added buttons inside the new message
            messageDiv.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                 if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    el.innerText = translations[currentLanguage][key];
                }
            });
        }

        window.copyMessageContent = function(elementId) {
            const textToCopy = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(textToCopy).then(() => {
                showCustomAlert('Copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                // Fallback for browsers that don't support clipboard API well in iframes
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showCustomAlert('Copied to clipboard!');
                } catch (err) {
                    showCustomAlert('Failed to copy.');
                }
                document.body.removeChild(textArea);
            });
        }

        window.redoQuery = function() {
            getFinalResponse();
        }

        // Enhanced Search and Filter Functions
        function filterTools() {
            const searchTerm = document.getElementById('tools-search').value.toLowerCase();
            const toolButtons = document.querySelectorAll('.ai-tool-btn');
            
            toolButtons.forEach(button => {
                const toolName = button.querySelector('span').textContent.toLowerCase();
                if (toolName.includes(searchTerm)) {
                    button.style.display = 'block';
                    button.classList.add('animate-pulse');
                    setTimeout(() => button.classList.remove('animate-pulse'), 500);
                } else {
                    button.style.display = 'none';
                }
            });
        }
        
        function filterByCategory(category) {
            // Update filter button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            
            // Show all tools if 'all' is selected
            if (category === 'all') {
                document.querySelectorAll('.ai-tool-btn').forEach(btn => {
                    btn.style.display = 'block';
                });
                return;
            }
            
            // Filter by category (you can add data-category attributes to your tool buttons)
            const toolCategories = {
                'analysis': ['caseInsights', 'casePrediction', 'devilsAdvocate', 'regulatoryImpact'],
                'drafting': ['draftPetition', 'docGenerator', 'explainNotice'],
                'research': ['legalDefinitions', 'bareAct', 'aiCaseSummary', 'docCompare', 'strategySim', 'stakeholder', 'contractIntel']
            };
            
            const toolsToShow = toolCategories[category] || [];
            document.querySelectorAll('.ai-tool-btn').forEach(btn => {
                const toolName = btn.getAttribute('onclick')?.match(/['"]([^'"]+)['"]/)?.[1];
                if (toolsToShow.includes(toolName)) {
                    btn.style.display = 'block';
                    btn.classList.add('animate-pulse');
                    setTimeout(() => btn.classList.remove('animate-pulse'), 500);
                } else {
                    btn.style.display = 'none';
                }
            });
        }
        
        // Enhanced Error Handling
        function showError(message, type = 'error') {
            const errorDiv = document.createElement('div');
            errorDiv.className = `${type === 'error' ? 'error-state' : 'success-state'}`;
            errorDiv.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'} mr-2 text-${type === 'error' ? 'red' : 'green'}-500"></i>
                    <span class="text-${type === 'error' ? 'red' : 'green'}-700 dark:text-${type === 'error' ? 'red' : 'green'}-300">${message}</span>
                </div>
            `;
            
            // Insert at the top of chat area
            const chatArea = document.getElementById('ai-chat-area');
            if (chatArea) {
                chatArea.insertBefore(errorDiv, chatArea.firstChild);
                setTimeout(() => errorDiv.remove(), 5000);
            }
        }
        
        // Enhanced Progress Indicators
        function showProgress(percentage, message = 'Processing...') {
            const progressDiv = document.createElement('div');
            progressDiv.className = 'fixed top-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 z-50';
            progressDiv.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="flex-1">
                        <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">${message}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            document.body.appendChild(progressDiv);
            return progressDiv;
        }
        
        // Enhanced Tooltips
        function addTooltips() {
            const toolButtons = document.querySelectorAll('.ai-tool-btn');
            toolButtons.forEach(button => {
                const toolName = button.querySelector('span').textContent;
                button.classList.add('tooltip-container');
                button.setAttribute('title', `Click to use ${toolName}`);
            });
        }
        
        // Enhanced Mobile Experience
        function enhanceMobileExperience() {
            // Add touch feedback
            const touchElements = document.querySelectorAll('button, .ai-tool-btn');
            touchElements.forEach(element => {
                element.classList.add('touch-target', 'micro-interaction');
            });
            
            // Add swipe gestures for mobile
            let startX = 0;
            let startY = 0;
            
            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const diffX = startX - endX;
                const diffY = startY - endY;
                
                // Swipe left to go back
                if (Math.abs(diffX) > Math.abs(diffY) && diffX > 50) {
                    // Add back navigation logic here
                }
            });
        }
        
        // Add missing functions
        window.selectToolAndNavigate = function(tool, event) {
            if (event) event.preventDefault();
            const user = window.auth.currentUser;
            if (user) {
                showPage('ai-assistant-page');
                const toolButtonOnAiPage = document.querySelector(`#ai-assistant-page .ai-tool-btn[onclick*="selectAiTool('${tool}'")]`);
                if(window.selectAiTool) window.selectAiTool(tool, toolButtonOnAiPage);
            } else {
                 document.getElementById('auth-modal').classList.remove('hidden');
            }
        }

        window.showAiAssistantPage = function(event) {
            if (event) event.preventDefault();
            const user = window.auth.currentUser;
            if (user) { 
                 showPage('ai-assistant-page');
            } else {
                document.getElementById('auth-modal').classList.remove('hidden');
            }
        }

        window.closeAuthModal = function() {
            document.getElementById('auth-modal').classList.add('hidden');
        }

        async function optimizePrompt() {
            const userInput = document.getElementById('ai-query-input').value;
            if (!userInput.trim()) return;
            const optimizerModal = document.getElementById('optimizer-modal');
            const optimizedOutput = document.getElementById('optimized-prompt-output');
            optimizedOutput.innerHTML = '<em>Optimizing...</em>';
            optimizerModal.classList.remove('hidden');
            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: userInput, tool: 'optimizer' })
                });
                const result = await response.json();
                const optimizedText = result.answer || (result.candidates && result.candidates[0].content.parts[0].text) || '';
                optimizedOutput.textContent = optimizedText;
                document.getElementById('use-optimized-btn').onclick = () => {
                    document.getElementById('ai-query-input').value = optimizedText;
                    closeOptimizerModal();
                };
            } catch(error) {
                console.error("Prompt optimization failed:", error);
                optimizedOutput.textContent = 'Could not optimize prompt at this time.';
            }
        }
        window.optimizePrompt = optimizePrompt;

        window.closeOptimizerModal = function() {
            document.getElementById('optimizer-modal').classList.add('hidden');
        }

        function toggleFaq(button) {
            const answer = button.nextElementSibling;
            const icon = button.querySelector('i');
            answer.classList.toggle('hidden');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        }

        function toggleHistory() {
            const historyContent = document.getElementById('history-content');
            const chevron = document.getElementById('history-chevron');
            historyContent.classList.toggle('hidden');
            chevron.classList.toggle('fa-chevron-down');
            chevron.classList.toggle('fa-chevron-up');
        }

        // Enhanced File Upload with Drag and Drop
        function setupDragAndDrop() {
            const textarea = document.getElementById('ai-query-input');
            const dropZone = document.getElementById('file-drop-zone');
            
            if (!textarea || !dropZone) return;
            
            // Show drop zone on drag enter
            textarea.addEventListener('dragenter', (e) => {
                e.preventDefault();
                dropZone.classList.remove('hidden');
                dropZone.classList.add('dragover');
            });
            
            // Hide drop zone on drag leave
            textarea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                if (!textarea.contains(e.relatedTarget)) {
                    dropZone.classList.add('hidden');
                    dropZone.classList.remove('dragover');
                }
            });
            
            // Handle file drop
            textarea.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.add('hidden');
                dropZone.classList.remove('dragover');
                
                const files = Array.from(e.dataTransfer.files);
                if (files.length > 0) {
                    // Create a fake event to use existing handleFileUpload
                    const fakeEvent = {
                        target: { files: files }
                    };
                    handleFileUpload(fakeEvent);
                }
            });
            
            // Prevent default drag behaviors
            textarea.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
        }
        
        // Enhanced File Upload with Progress
        async function handleFileUpload(event) {
            const files = Array.from(event.target.files);
            
            // Validate file types and sizes
            const validFiles = [];
            const invalidFiles = [];
            
            files.forEach(file => {
                const maxSize = 10 * 1024 * 1024; // 10MB
                const allowedTypes = [
                    'application/pdf',
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    'image/jpeg',
                    'image/png',
                    'image/gif',
                    'image/bmp',
                    'text/plain'
                ];
                
                if (file.size > maxSize) {
                    invalidFiles.push(`${file.name} (too large - max 10MB)`);
                } else if (!allowedTypes.includes(file.type)) {
                    invalidFiles.push(`${file.name} (unsupported file type)`);
                } else {
                    validFiles.push(file);
                }
            });
            
            // Show warnings for invalid files
            if (invalidFiles.length > 0) {
                showError(`Some files were skipped: ${invalidFiles.join(', ')}`, 'error');
            }
            
            if (validFiles.length === 0) {
                return;
            }
            
            // Add new files to existing ones
            aiState.files = [...aiState.files, ...validFiles];
            
            // Show progress indicator
            const progressBar = showProgress(0, `Processing ${validFiles.length} file(s)...`);
            let processedCount = 0;
            
            // Extract text from all files in parallel with progress
            try {
                const processPromises = aiState.files.map(async (file, index) => {
                    const text = await extractTextFromFile(file);
                    processedCount++;
                    const percentage = Math.round((processedCount / aiState.files.length) * 100);
                    if (progressBar) {
                        progressBar.querySelector('.progress-fill').style.width = `${percentage}%`;
                        progressBar.querySelector('.text-sm').textContent = `Processing ${processedCount}/${aiState.files.length} files...`;
                    }
                    return text;
                });
                
                window.extractedFileContents = await Promise.all(processPromises);
                
                if (progressBar) progressBar.remove();
                showError(`${validFiles.length} file(s) uploaded and processed successfully!`, 'success');
            } catch (error) {
                console.error('File processing error:', error);
                if (progressBar) progressBar.remove();
                showError('Some files failed to process. Please try again.', 'error');
            }
            
            renderFileList();
            
            // Clear the input for future uploads
            event.target.value = '';
        }
        
        function removeFile(index) {
            aiState.files.splice(index, 1);
            if (window.extractedFileContents) window.extractedFileContents.splice(index, 1);
            renderFileList();
        }
        
        function renderFileList() {
            const fileDisplayArea = document.getElementById('file-display-area');
            if(!fileDisplayArea) return;
            fileDisplayArea.innerHTML = '';
            
            // Show file count header
            if (aiState.files.length > 0) {
                fileDisplayArea.innerHTML = `
                    <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded-lg mb-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <i class="fas fa-folder-open text-blue-600 dark:text-blue-400 mr-2"></i>
                                <span class="font-medium text-gray-700 dark:text-gray-300">Uploaded Files (${aiState.files.length})</span>
                            </div>
                            <button onclick="clearAllFiles()" class="text-red-500 hover:text-red-700 text-sm font-medium">
                                <i class="fas fa-trash mr-1"></i>Clear All
                            </button>
                        </div>
                    </div>
                `;
            }
            
            // Render each file with enhanced info
            aiState.files.forEach((file, index) => {
                const fileSize = (file.size / 1024).toFixed(1);
                const fileIcon = getFileIcon(file.name);
                const fileType = getFileType(file.name);
                
                fileDisplayArea.innerHTML += `
                    <div class="flex items-center justify-between bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 p-3 rounded-lg text-sm mb-2 hover:shadow-md transition-shadow">
                        <div class="flex items-center flex-1 min-w-0">
                            <div class="flex-shrink-0 mr-3">
                                <i class="${fileIcon} text-lg ${getFileColor(fileType)}"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="font-medium text-gray-900 dark:text-white truncate" title="${file.name}">
                                    ${file.name}
                                </div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">
                                    ${fileType} â€¢ ${fileSize} KB
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center ml-3">
                            <span class="text-xs text-green-600 dark:text-green-400 mr-2">
                                <i class="fas fa-check-circle"></i> Ready
                            </span>
                            <button onclick="removeFile(${index})" class="text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20" title="Remove file">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            // Doc Compare mode: show warning/info if less than 2 files, checkmark if 2+
            if (aiState.tool === 'docCompare') {
                const submitBtn = document.querySelector('#ai-assistant-page button[onclick*="generateAiResponse"]');
                let infoHtml = '';
                if (aiState.files.length < 2) {
                    if (submitBtn) submitBtn.disabled = true;
                    infoHtml = `
                        <div class="flex items-center text-amber-600 dark:text-amber-400 mt-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg">
                            <i class="fas fa-exclamation-triangle mr-2"></i>
                            <span class="text-sm">Please upload at least two files for document comparison.</span>
                        </div>
                    `;
                } else {
                    if (submitBtn) submitBtn.disabled = false;
                    infoHtml = `
                        <div class="flex items-center text-green-600 dark:text-green-400 mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                            <i class="fas fa-check-circle mr-2"></i>
                            <span class="text-sm font-medium">Ready for document comparison!</span>
                        </div>
                    `;
                }
                fileDisplayArea.innerHTML += infoHtml;
            }
            
            // Show general file upload info
            if (aiState.files.length > 0 && aiState.tool !== 'docCompare') {
                fileDisplayArea.innerHTML += `
                    <div class="flex items-center text-blue-600 dark:text-blue-400 mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                        <i class="fas fa-info-circle mr-2"></i>
                        <span class="text-sm">Files will be processed and included in your AI query.</span>
                    </div>
                `;
            }
        }
        
        function getFileIcon(filename) {
            const ext = filename.toLowerCase().split('.').pop();
            switch(ext) {
                case 'pdf': return 'fas fa-file-pdf';
                case 'doc': case 'docx': return 'fas fa-file-word';
                case 'txt': return 'fas fa-file-alt';
                case 'jpg': case 'jpeg': case 'png': case 'gif': case 'bmp': return 'fas fa-file-image';
                default: return 'fas fa-file';
            }
        }
        
        function getFileType(filename) {
            const ext = filename.toLowerCase().split('.').pop();
            switch(ext) {
                case 'pdf': return 'PDF Document';
                case 'doc': case 'docx': return 'Word Document';
                case 'txt': return 'Text File';
                case 'jpg': case 'jpeg': case 'png': case 'gif': case 'bmp': return 'Image File';
                default: return 'File';
            }
        }
        
        function getFileColor(fileType) {
            switch(fileType) {
                case 'PDF Document': return 'text-red-500';
                case 'Word Document': return 'text-blue-500';
                case 'Text File': return 'text-gray-500';
                case 'Image File': return 'text-green-500';
                default: return 'text-gray-400';
            }
        }
        
        function clearAllFiles() {
            aiState.files = [];
            if (window.extractedFileContents) window.extractedFileContents = [];
            renderFileList();
            showCustomAlert('All files cleared successfully.');
        }
        window.removeFile = removeFile;
        
        function showCustomAlert(message) {
            let alertBox = document.getElementById('custom-alert-box');
            if (!alertBox) {
                alertBox = document.createElement('div');
                alertBox.id = 'custom-alert-box';
                alertBox.className = 'fixed top-5 right-5 bg-blue-600 text-white py-2 px-4 rounded-lg shadow-lg z-50 transition-opacity duration-300 opacity-0';
                document.body.appendChild(alertBox);
            }
            alertBox.innerText = message;
            alertBox.classList.remove('opacity-0');
            setTimeout(() => { 
                 alertBox.classList.add('opacity-0');
            }, 3000);
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.1 });
        
        // --- Mobile Menu Toggle ---
        let mobileBtn, overlay, menuPanel, closeBtn;

        function openMenu() {
            overlay.classList.add('active');
            menuPanel.classList.add('active');
            mobileBtn.setAttribute('aria-expanded', 'true');
            overlay.setAttribute('aria-hidden', 'false');
        }
        function closeMenu() {
            overlay.classList.remove('active');
            menuPanel.classList.remove('active');
            mobileBtn.setAttribute('aria-expanded', 'false');
            overlay.setAttribute('aria-hidden', 'true');
        }
        window.closeMenu = closeMenu;

        // === Bottom nav hide when chat opens ===
        window.toggleSimpleChat = () => {
            const chat  = document.getElementById('chat-container');
            const bnav  = document.getElementById('bottom-nav');
            chat.classList.toggle('chat-visible');
            chat.classList.toggle('chat-hidden');
            bnav.classList.toggle('hidden');
        };
        
        // --- DOMContentLoaded Listener ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- Blog Post Injection ---
            const blogGrid = document.getElementById('blog-posts-grid');
            const blogPostContainer = document.getElementById('blog-post-container');

            if(blogGrid && blogPostContainer){
                // Populate blog grid
                blogPosts.forEach(post => {
                    const card = document.createElement('div');
                    card.id = `blog-card-${post.id}`;
                    card.className = "bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden service-card";
                    card.innerHTML = `
                        <div class="h-48 overflow-hidden">
                            <img src="${post.image}" alt="Blog post image" class="w-full h-full object-cover transition-transform duration-300 hover:scale-105" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/400x192/cccccc/ffffff?text=Blog+Post';">
                        </div>
                        <div class="p-6">
                            <div class="text-sm text-blue-600 dark:text-blue-400 mb-2 font-semibold">${post.date} â€¢ ${post.category}</div>
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3" data-lang-key="blog${post.id}_title"></h3>
                            <p class="text-gray-600 dark:text-gray-300 mb-4" data-lang-key="blog${post.id}_desc"></p>
                            <a href="#" onclick="showPage('blog-post-${post.id}', event)" class="text-blue-600 dark:text-blue-400 font-medium hover:underline" data-lang-key="readMore">Read More â†’</a>
                        </div>
                    `;
                    blogGrid.appendChild(card);

                    // Create the full blog post page
                    const postPage = document.createElement('div');
                    postPage.id = `blog-post-${post.id}`;
                    postPage.className = 'page blog-post-page hidden';
                    const postContent = null; // blogTranslations removed, use static content or translations object if needed
                    postPage.innerHTML = `
                        <section class="py-20 px-4 sm:px-6 lg:px-8">
                            <div class="max-w-4xl mx-auto">
                                <a href="#" onclick="showPage('blog-page', event)" class="inline-block mb-8 text-blue-600 dark:text-blue-400 hover:underline">â† Back to Blog</a>
                                <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white mb-4">${post.date} Blog Post</h1>
                                <div class="text-md text-gray-500 dark:text-gray-400 mb-8">${post.date} â€¢ ${post.category}</div>
                                <img src="${post.image}" alt="Blog post image" class="w-full h-auto rounded-lg shadow-lg mb-12 max-h-[500px] object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/800x500/cccccc/ffffff?text=Blog+Image';">
                                <div class="prose dark:prose-invert max-w-none lg:prose-lg text-gray-700 dark:text-gray-300 blog-content">
                                    <p>This is the introduction to our latest insights on legal technology and AI innovations.</p>
                                    <h2>Key Legal Technology Trends</h2>
                                    <p>The legal industry is experiencing rapid transformation through artificial intelligence and automation tools that enhance efficiency and accuracy.</p>
                                    <h2>AI-Powered Legal Research</h2>
                                    <p>Modern AI systems can analyze vast legal databases, providing lawyers with comprehensive research capabilities and case precedent analysis.</p>
                                    <h2>Future Implications</h2>
                                    <p>These technological advances are reshaping how legal professionals approach case preparation, client consultation, and legal documentation.</p>
                                    <h2>Conclusion</h2>
                                    <p>As we move forward, the integration of AI in legal practice will continue to evolve, offering new opportunities for enhanced legal services.</p>
                                    <p>Stay tuned for more insights on legal technology and AI innovations from our expert team.</p>
                                </div>
                            </div>
                        </section>
                    `;
                    blogPostContainer.appendChild(postPage);
                });
            }


            // Mobile menu elements
            mobileBtn  = document.getElementById('mobile-menu-button');
            overlay    = document.getElementById('mobile-menu-overlay');
            menuPanel  = document.getElementById('mobile-menu-panel');
            closeBtn   = document.getElementById('mobile-menu-close');
            
            if (mobileBtn) mobileBtn.addEventListener('click', openMenu);
            if (closeBtn) closeBtn.addEventListener('click', closeMenu);
            if (overlay) overlay.addEventListener('click', closeMenu);

            // Initial setup
            showPage('home-page');
            document.querySelectorAll('.animated-section').forEach(section => observer.observe(section));
            document.querySelectorAll('img').forEach(img => img.setAttribute('loading', 'lazy'));
            
            const fileUpload = document.getElementById('file-upload');
            if(fileUpload) fileUpload.addEventListener('change', handleFileUpload);
            
            // Initialize enhanced features
            addTooltips();
            enhanceMobileExperience();
            setupDragAndDrop();
            
            // --- Persist Theme ---
            const themeToggle = document.getElementById('dark-mode-toggle');
            const rootEl = document.documentElement;
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                rootEl.classList.add('dark');
            } else {
                rootEl.classList.remove('dark');
            }
            themeToggle.addEventListener('click', () => {
                const isDark = rootEl.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });

            // Mobile Theme Toggle
            const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
            if (mobileThemeToggle) {
                mobileThemeToggle.addEventListener('click', () => {
                    const isDark = rootEl.classList.toggle('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                });
            }

            // --- Persist Language ---
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                const lang = btn.dataset.lang;
                setLanguage(lang); // This function now handles ALL translations
                });
            });
            // On page load, set the language from localStorage or default to 'en'
            const lang = localStorage.getItem('language') || 'en';
            setLanguage(lang);


            // Query Form Submission
            const queryForm = document.getElementById('query-form');
            if (queryForm) {
                const queryFormMessage = document.getElementById('query-form-message');
                queryForm.addEventListener('submit', e => {
                    if (!queryForm.checkValidity()) {
                        e.preventDefault();
                        queryForm.querySelectorAll(':invalid').forEach(el => {
                            el.classList.add('border-red-500');
                        });
                        return;
                    }
                    e.preventDefault();
                    queryFormMessage.innerHTML = '<p class="text-blue-500">Submitting...</p>';
                    fetch("https://sheetdb.io/api/v1/wmpfl5dqju9e9", {
                        method: "POST",
                        body: new FormData(queryForm)
                    }).then(response => response.json()).then((html) => {
                        queryForm.reset();
                        queryFormMessage.innerHTML = "<p class='text-green-500'>Form submitted successfully!</p>";
                        setTimeout(() => { queryFormMessage.innerHTML = ''; }, 3000);
                    }).catch(error => {
                        console.error('Form submission error:', error);
                        queryFormMessage.innerHTML = "<p class='text-red-500'>There was an error submitting the form.</p>";
                    });
                });
            }

            // Prompt Optimizer Button
            const optimizeBtn = document.getElementById('optimize-prompt-btn');
            if (optimizeBtn) {
                optimizeBtn.addEventListener('click', optimizePrompt);
            }

        });

        // ===== File-to-Text Extraction Helpers =====
        async function blobToBase64(blob) {
            return new Promise(res => {
                const reader = new FileReader();
                reader.onload = e => res(e.target.result.split(',')[1]);
                reader.readAsDataURL(blob);
            });
        }

        /**
         * Extract plain text from many common legal-document formats so that the AI
         * can reason over the contents. Supported types: txt/markdown/JSON, PDF,
         * DOCX, and images (OCR via tesseract.js).
         */
        async function extractTextFromFile(file) {
            // 1. Plain text-based files
            if (file.type.startsWith('text') || /\.(txt|md|csv|json)$/i.test(file.name)) {
                return await file.text();
            }
            // 2. PDF â€“ use pdf.js
            if (file.type === 'application/pdf' || /\.pdf$/i.test(file.name)) {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                let text = '';
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const { items } = await page.getTextContent();
                    text += items.map(it => it.str).join(' ') + '\n\n';
                }
                return text;
            }
            // 3. DOCX â€“ use mammoth.js (returns raw text)
            if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || /\.docx$/i.test(file.name)) {
                const arrayBuffer = await file.arrayBuffer();
                const result = await mammoth.extractRawText({ arrayBuffer });
                return result.value;
            }
            // 4. Images â€“ run OCR with Tesseract.js (default language: English)
            if (file.type.startsWith('image/') || /\.(jpe?g|png|bmp|gif|tiff?)$/i.test(file.name)) {
                const dataUrl = await new Promise(res => {
                    const reader = new FileReader();
                    reader.onload = e => res(e.target.result);
                    reader.readAsDataURL(file);
                });
                const { data: { text } } = await Tesseract.recognize(dataUrl, 'eng');
                return text;
            }
            // 5. Fallback â€“ base64 encode so at least AI can attempt to interpret
            return `[[Base64 data]] ${await blobToBase64(file)}`;
        }

        window.clearAllFiles = clearAllFiles;
        
        // Enhanced Search and Filter Functions
        function filterTools() {
            const searchTerm = document.getElementById('tools-search').value.toLowerCase();
            const toolButtons = document.querySelectorAll('.ai-tool-btn');
            
            toolButtons.forEach(button => {
                const toolName = button.querySelector('span').textContent.toLowerCase();
                if (toolName.includes(searchTerm)) {
                    button.style.display = 'block';
                    button.classList.add('animate-pulse');
                    setTimeout(() => button.classList.remove('animate-pulse'), 500);
                } else {
                    button.style.display = 'none';
                }
            });
        }
        
        function filterByCategory(category) {
            // Update filter button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            event.target.classList.add('active', 'bg-blue-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            
            // Show all tools if 'all' is selected
            if (category === 'all') {
                document.querySelectorAll('.ai-tool-btn').forEach(btn => {
                    btn.style.display = 'block';
                });
                return;
            }
            
            // Filter by category
            const toolCategories = {
                'analysis': ['caseInsights', 'casePrediction', 'devilsAdvocate', 'regulatoryImpact'],
                'drafting': ['draftPetition', 'docGenerator', 'explainNotice'],
                'research': ['legalDefinitions', 'bareAct', 'aiCaseSummary', 'docCompare', 'strategySim', 'stakeholder', 'contractIntel']
            };
            
            const toolsToShow = toolCategories[category] || [];
            document.querySelectorAll('.ai-tool-btn').forEach(btn => {
                const toolName = btn.getAttribute('onclick')?.match(/['"]([^'"]+)['"]/)?.[1];
                if (toolsToShow.includes(toolName)) {
                    btn.style.display = 'block';
                    btn.classList.add('animate-pulse');
                    setTimeout(() => btn.classList.remove('animate-pulse'), 500);
                } else {
                    btn.style.display = 'none';
                }
            });
        }
        
        // Enhanced Error Handling
        function showError(message, type = 'error') {
            const errorDiv = document.createElement('div');
            errorDiv.className = `${type === 'error' ? 'error-state' : 'success-state'}`;
            errorDiv.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : 'check-circle'} mr-2 text-${type === 'error' ? 'red' : 'green'}-500"></i>
                    <span class="text-${type === 'error' ? 'red' : 'green'}-700 dark:text-${type === 'error' ? 'red' : 'green'}-300">${message}</span>
                </div>
            `;
            
            // Insert at the top of chat area
            const chatArea = document.getElementById('ai-chat-area');
            if (chatArea) {
                chatArea.insertBefore(errorDiv, chatArea.firstChild);
                setTimeout(() => errorDiv.remove(), 5000);
            }
        }
        
        // Enhanced Progress Indicators
        function showProgress(percentage, message = 'Processing...') {
            const progressDiv = document.createElement('div');
            progressDiv.className = 'fixed top-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 z-50';
            progressDiv.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="flex-1">
                        <div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">${message}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            document.body.appendChild(progressDiv);
            return progressDiv;
        }
        
        // Enhanced Tooltips
        function addTooltips() {
            const toolButtons = document.querySelectorAll('.ai-tool-btn');
            toolButtons.forEach(button => {
                const toolName = button.querySelector('span').textContent;
                button.classList.add('tooltip-container');
                button.setAttribute('title', `Click to use ${toolName}`);
            });
        }
        
        // Enhanced Mobile Experience
        function enhanceMobileExperience() {
            // Add touch feedback
            const touchElements = document.querySelectorAll('button, .ai-tool-btn');
            touchElements.forEach(element => {
                element.classList.add('touch-target', 'micro-interaction');
            });
            
            // Add swipe gestures for mobile
            let startX = 0;
            let startY = 0;
            
            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const diffX = startX - endX;
                const diffY = startY - endY;
                
                // Swipe left to go back
                if (Math.abs(diffX) > Math.abs(diffY) && diffX > 50) {
                    // Add back navigation logic here
                }
            });
        }
        
        // Add missing functions
    </script>
</body>
</html>
